(function(){var e={7519:function(e,t,n){"use strict";var l=n(9242),a=n(3396);function o(e,t){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var s=n(89);const i={},r=(0,s.Z)(i,[["render",o]]);var u=r,c=n(5431);(0,c.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=n(2483),h=n(7139);const m=e=>((0,a.dD)("data-v-4e2a0708"),e=e(),(0,a.Cn)(),e),p={class:"navbar navbar-expand-lg navbar-dark bg-dark"},_={class:"container-fluid"},g=m((()=>(0,a._)("a",{class:"navbar-brand",href:"/"},"Ticketing App",-1))),w=m((()=>(0,a._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1))),b={class:"collapse navbar-collapse",id:"navbarSupportedContent"},v={class:"navbar-nav me-auto mb-2 mb-lg-0"},f=m((()=>(0,a._)("li",{class:"nav-item"},[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"/"},"Home")],-1))),k={class:"nav-item"},y={class:"nav-item"},S={key:0,class:"nav-item"},D=m((()=>(0,a._)("a",{class:"nav-link",href:"/book"},"Book Tickets",-1))),$=[D],C={class:"nav-item dropdown"},V=m((()=>(0,a._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," My Account ",-1))),T={key:0,class:"dropdown-menu","aria-labelledby":"navbarDropdown"},z=m((()=>(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"/signup"},"Sign up")],-1))),q=m((()=>(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"/signin"},"Sign in")],-1))),x=[z,q],U={key:1,class:"dropdown-menu","aria-labelledby":"navbarDropdown"},A=m((()=>(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"/protected"},"Dashboard")],-1))),F={key:2,class:"dropdown-menu","aria-labelledby":"navbarDropdown"},j=m((()=>(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"/admin/dashboard"},"Admin Dashboard")],-1))),P={class:"d-flex"},R={class:"search-container"},M={key:0,class:"suggestions-list"},I=["onClick"],N={class:"suggestion-type"},H={class:"child-center-container"};function L(e,t,n,o,s,i){const r=(0,a.up)("SearchResults"),u=(0,a.up)("ShowList"),c=(0,a.up)("VenueList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",p,[(0,a._)("div",_,[g,w,(0,a._)("div",b,[(0,a._)("ul",v,[f,(0,a._)("li",k,[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[0]||(t[0]=e=>i.show("open"))},"Shows")]),(0,a._)("li",y,[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[1]||(t[1]=e=>i.venue("open"))},"Venues")]),"admin"!=s.role?((0,a.wg)(),(0,a.iD)("li",S,$)):(0,a.kq)("",!0),(0,a._)("li",C,[V,null===s.role?((0,a.wg)(),(0,a.iD)("ul",T,x)):(0,a.kq)("",!0),"user"===s.role?((0,a.wg)(),(0,a.iD)("ul",U,[A,(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[2]||(t[2]=(...e)=>i.logout&&i.logout(...e))},"Log out")])])):(0,a.kq)("",!0),"admin"===s.role?((0,a.wg)(),(0,a.iD)("ul",F,[j,(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[3]||(t[3]=(...e)=>i.logout&&i.logout(...e))},"Log out")])])):(0,a.kq)("",!0)])]),(0,a._)("form",P,[(0,a._)("div",R,[(0,a.wy)((0,a._)("input",{type:"search",placeholder:"Search","aria-label":"Search","onUpdate:modelValue":t[4]||(t[4]=e=>s.searchQuery=e),onInput:t[5]||(t[5]=(...e)=>i.handleSearchInput&&i.handleSearchInput(...e)),onKeyup:t[6]||(t[6]=(0,l.D2)(((...e)=>i.performSearch&&i.performSearch(...e)),["enter"])),class:"search-input"},null,544),[[l.nr,s.searchQuery]]),s.showSuggestions?((0,a.wg)(),(0,a.iD)("ul",M,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.suggestions,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,onClick:t=>i.selectSuggestion(e)},[(0,a._)("span",null,(0,h.zw)(e.result),1),(0,a._)("span",N,(0,h.zw)(e.type),1)],8,I)))),128))])):(0,a.kq)("",!0)])])])])]),(0,a._)("div",H,[s.element?((0,a.wg)(),(0,a.j4)(r,{key:0,element:s.element},null,8,["element"])):(0,a.kq)("",!0)]),s.Show?((0,a.wg)(),(0,a.j4)(u,{key:0,list:s.showlist,onClose:t[7]||(t[7]=e=>i.show("close"))},null,8,["list"])):(0,a.kq)("",!0),s.Venue?((0,a.wg)(),(0,a.j4)(c,{key:1,list:s.venuelist,onClose:t[8]||(t[8]=e=>i.venue("close"))},null,8,["list"])):(0,a.kq)("",!0)],64)}async function B(e){const t=await fetch(e,{headers:{"Content-type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});try{if(t.ok){const e=await t.json();return console.log(e),e}console.log(t.statusText),console.log(t.message)}catch(n){console.log(n)}}const E={key:0},W=(0,a._)("h1",null,"Search Result Details",-1),Y={key:0},Z=(0,a._)("label",{for:"rating"},"Filter by rating:",-1),O=["value"],Q=(0,a._)("label",{for:"tags"},"Filter by tags:",-1),K=["value"],J=(0,a._)("th",null,"Show Name",-1),G=(0,a._)("th",null,"Tags",-1),X=(0,a._)("th",null,"Rating",-1),ee=(0,a._)("th",null,"Date",-1),te=(0,a._)("th",null,"Time",-1),ne=(0,a._)("th",null,"Ticket Price",-1),le={key:0},ae={key:0},oe=["onClick"],se={key:1,class:"btn btn-grey btn-sm",disabled:""},ie={key:1},re=(0,a._)("h1",null,"Search Result Details",-1),ue=(0,a._)("th",null,"Venue Name",-1),ce=(0,a._)("th",null,"Venue Place",-1),de=(0,a._)("th",null,"Venue Location",-1),he=(0,a._)("th",null,"Date",-1),me=(0,a._)("th",null,"Time",-1),pe=(0,a._)("th",null,"Ticket Price",-1),_e={key:0},ge={key:0},we=["onClick"],be={key:1,class:"btn btn-grey btn-sm",disabled:""};function ve(e,t,n,o,s,i){return(0,a.wg)(),(0,a.iD)(a.HY,null,["Venue name"===n.element.type||"Location"===n.element.type?((0,a.wg)(),(0,a.iD)("div",E,[W,"Location"===n.element.type?((0,a.wg)(),(0,a.iD)("p",Y,"Location:"+(0,h.zw)(n.element.location),1)):(0,a.kq)("",!0),(0,a._)("p",null,"Venue: "+(0,h.zw)(n.element.result),1),Z,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectedRating=e),name:"rating"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.availableRatings,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e},(0,h.zw)(e),9,O)))),128))],512),[[l.bM,s.selectedRating]]),Q,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.selectedTags=e),name:"tags"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.tags,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e},(0,h.zw)(e),9,K)))),128))],512),[[l.bM,s.selectedTags]]),s.selectedTags.length>0||s.selectedRating?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>i.removeFilter&&i.removeFilter(...e)),class:"btn btn-secondary btn-sm"},"Reset Filter")):(0,a.kq)("",!0),(0,a._)("table",null,[(0,a._)("tr",null,[J,G,X,ee,te,ne,i.localstoragecheck("user")?((0,a.wg)(),(0,a.iD)("th",le,"Book Now")):(0,a.kq)("",!0)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.filteredLinks,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.show_name),1),(0,a._)("td",null,(0,h.zw)(e.tags),1),(0,a._)("td",null,(0,h.zw)(e.rating),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1),i.localstoragecheck("user")?((0,a.wg)(),(0,a.iD)("td",ae,[e.tickets_left>0?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary btn-sm",onClick:t=>i.book(e.link_id)},"Book Now",8,oe)):((0,a.wg)(),(0,a.iD)("button",se,"Book Now"))])):(0,a.kq)("",!0)])))),128))])])):(0,a.kq)("",!0),"Show name"===n.element.type?((0,a.wg)(),(0,a.iD)("div",ie,[re,(0,a._)("p",null,"Show: "+(0,h.zw)(n.element.result),1),(0,a._)("table",null,[(0,a._)("tr",null,[ue,ce,de,he,me,pe,i.localstoragecheck("user")?((0,a.wg)(),(0,a.iD)("th",_e,"Book Now")):(0,a.kq)("",!0)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.element.link,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.venue_name),1),(0,a._)("td",null,(0,h.zw)(e.place),1),(0,a._)("td",null,(0,h.zw)(e.location),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1),i.localstoragecheck("user")?((0,a.wg)(),(0,a.iD)("td",ge,[e.tickets_left>0?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary btn-sm",onClick:t=>i.book(e.link_id)},"Book Now",8,we)):((0,a.wg)(),(0,a.iD)("button",be,"Book Now"))])):(0,a.kq)("",!0)])))),128))])])):(0,a.kq)("",!0)],64)}n(7658);var fe={name:"SearchResults",props:{element:{type:Object,required:!0}},data(){return{selectedRating:null,selectedTags:[],tags:["Action","Comedy","Drama","Sci-Fi","Fiction"]}},methods:{localstoragecheck(e){if("user"===e){const e=this.$store.state.role;return"user"===e}},book(e){this.$router.push(`/book/${e}`)},getAvailableRatings(){const e=new Set;for(let t=1;t<=5;t++)e.add(t);return e},removeFilter(){this.selectedRating=null,this.selectedTags=[]}},computed:{filteredLinks(){let e=this.element.link;return this.selectedRating&&(e=e.filter((e=>e.rating>=this.selectedRating))),this.selectedTags.length>0&&(e=e.filter((e=>e.tags===this.selectedTags))),e},availableRatings(){return this.getAvailableRatings()}}};const ke=(0,s.Z)(fe,[["render",ve]]);var ye=ke;const Se=e=>((0,a.dD)("data-v-48c0ce04"),e=e(),(0,a.Cn)(),e),De={class:"modal"},$e={class:"modal-content"},Ce=Se((()=>(0,a._)("h2",null,"Shows",-1))),Ve=Se((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Show Name"),(0,a._)("th",null,"Rating"),(0,a._)("th",null,"Tags")],-1))),Te=["href"];function ze(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",De,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",$e,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),Ce,(0,a._)("table",null,[Ve,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("a",{href:`/show/details/${e.id}`},(0,h.zw)(e.name),9,Te)]),(0,a._)("td",null,(0,h.zw)(e.rating),1),(0,a._)("td",null,(0,h.zw)(e.tags),1)])))),128))])])])),_:1})])}var qe={name:"ShowList",props:{list:{type:Array,required:!0}},data(){return{name:"",rating:"",tags:"",id:null}},methods:{closeForm(){this.$emit("close")},showfetch(e){e.Modifier=!0,this.id=e.id},closeshowfetch(e){e.Modifier=!1}},watch:{list(e,t){e&&console.log(e==t)}}};const xe=(0,s.Z)(qe,[["render",ze],["__scopeId","data-v-48c0ce04"]]);var Ue=xe;const Ae=e=>((0,a.dD)("data-v-303c946c"),e=e(),(0,a.Cn)(),e),Fe={class:"modal"},je={class:"modal-content"},Pe=Ae((()=>(0,a._)("h2",null,"Venues",-1))),Re=Ae((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Venue Name"),(0,a._)("th",null,"Venue Place"),(0,a._)("th",null,"Venue Location"),(0,a._)("th",null,"Venue Capacity")],-1))),Me=["href"];function Ie(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Fe,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",je,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),Pe,(0,a._)("table",null,[Re,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("a",{href:`/venue/details/${e.id}`},(0,h.zw)(e.name),9,Me)]),(0,a._)("td",null,(0,h.zw)(e.place),1),(0,a._)("td",null,(0,h.zw)(e.location),1),(0,a._)("td",null,(0,h.zw)(e.capacity),1)])))),128))])])])),_:1})])}var Ne={name:"VenueList",props:{list:{type:Array,required:!0}},data(){return{name:"",place:"",location:"",capacity:null}},methods:{closeForm(){this.$emit("close")}}};const He=(0,s.Z)(Ne,[["render",Ie],["__scopeId","data-v-303c946c"]]);var Le=He;const Be="http://127.0.0.1:8080/";var Ee={name:"HomePage",components:{SearchResults:ye,ShowList:Ue,VenueList:Le},data(){return{searchQuery:"",suggestions:null,element:null,showSuggestions:!1,venuelist:null,showlist:null,Show:!1,Venue:!1,role:null}},mounted(){fetch(`${Be}api/token/verifier`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();console.log(e.statusText),console.timeLog(e.json().message)})).then((e=>this.role=e.role)).catch((e=>console.log(e)))},methods:{async handleSearchInput(){this.searchQuery.length>0?(await B(`${Be}api/search?query=${this.searchQuery}`).then((e=>{this.suggestions=e})),this.suggestions.filter((e=>e.result.toLowerCase().includes(this.searchQuery.toLowerCase()))),this.showSuggestions=!0):(this.showSuggestions=!1,this.suggestions=[])},selectSuggestion(e){console.log("Selected suggestion:",e),this.searchQuery=e.result,this.element=e,this.showSuggestions=!1},performSearch(){console.log("Performing search:",this.searchQuery,this.element),this.searchQuery="",this.showSuggestions=!1},show(e){"open"===e?(B(`${Be}api/show`).then((e=>this.showlist=e)),this.Show=!0):"close"===e&&(this.Show=!1)},venue(e){"open"===e?(B(`${Be}api/venue`).then((e=>this.venuelist=e)),this.Venue=!0):"close"===e&&(this.Venue=!1)},logout(){this.$store.commit("role",null),this.role=null,localStorage.removeItem("authToken"),alert("Logged out successfully"),location.reload()}},watch:{role(e,t){console.log(t,e),"admin"===e?this.$store.commit("role","admin"):"user"===e?this.$store.commit("role","user"):this.$store.commit("role",null)}}};const We=(0,s.Z)(Ee,[["render",L],["__scopeId","data-v-4e2a0708"]]);var Ye=We;const Ze=(0,a._)("h1",null,"Sign in",-1),Oe={class:"vh-100"},Qe={class:"container py-5 h-100"},Ke={class:"row d-flex align-items-center justify-content-center h-100"},Je=(0,a._)("div",{class:"col-md-8 col-lg-7 col-xl-6"},[(0,a._)("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg",class:"img-fluid",alt:"Phone image"})],-1),Ge={class:"col-md-7 col-lg-5 col-xl-5 offset-xl-1"},Xe={class:"form-outline mb-4"},et=(0,a._)("label",{class:"form-label",for:"form1Example13"},"Email/username",-1),tt={class:"form-outline mb-4"},nt=(0,a._)("label",{class:"form-label",for:"form1Example23"},"Password",-1),lt=(0,a._)("div",{class:"d-flex justify-content-around align-items-center mb-4"},[(0,a._)("a",{href:"/forgot/password"},"Forgot password?")],-1),at={class:"text-center"},ot=(0,a._)("strong",null,[(0,a.Uk)("New user? "),(0,a._)("a",{href:"/signup"},"Sign Up")],-1),st=(0,a._)("div",{class:"text-center"},[(0,a._)("a",{href:"/"},"Home")],-1);function it(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[Ze])),_:1})]),(0,a._)("section",Oe,[(0,a._)("div",Qe,[(0,a._)("div",Ke,[Je,(0,a._)("div",Ge,[(0,a._)("div",Xe,[et,(0,a.wy)((0,a._)("input",{type:"username",id:"form1Example13",class:"form-control form-control-lg",placeholder:"username/email","onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e)},null,512),[[l.nr,s.username]])]),(0,a._)("div",tt,[nt,(0,a.wy)((0,a._)("input",{type:"password",id:"form1Example23",class:"form-control form-control-lg",placeholder:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e)},null,512),[[l.nr,s.password]])]),lt,(0,a._)("div",at,[(0,a._)("button",{type:"submit",class:"btn btn-primary btn-lg btn-block",onClick:t[2]||(t[2]=(...e)=>i.sendData&&i.sendData(...e))},"Sign in")])]),ot])])]),st],64)}n(8958);var rt=n(8082);function ut(e){const t=(0,rt.SHA256)(e).toString();return t}var ct={name:"SignIn",data(){return{email:"",username:"",password:""}},methods:{async sendData(){const e=await fetch(`${Be}signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:ut(this.password)})});if(e.ok){const t=await e.json();console.log(t.access_token),localStorage.setItem("authToken",t.access_token),"user"==t.role?this.$router.push("/protected"):"admin"==t.role?this.$router.push("/admin/dashboard"):this.$router.push("/signin")}else console.log(e.statusText)}}};const dt=(0,s.Z)(ct,[["render",it]]);var ht=dt;const mt=(0,a._)("h1",null,"Sign up",-1),pt={class:"vh-100"},_t={class:"container py-5 h-100"},gt={class:"row d-flex align-items-center justify-content-center h-100"},wt=(0,a._)("div",{class:"col-md-8 col-lg-7 col-xl-6"},[(0,a._)("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg",class:"img-fluid",alt:"Phone image"})],-1),bt={class:"col-md-7 col-lg-5 col-xl-5 offset-xl-1"},vt={class:"form-outline mb-4"},ft=(0,a._)("label",{class:"form-label",for:"form1Example13"},"Email address",-1),kt={key:0},yt={key:1,class:"text-danger"},St=(0,a._)("p",null,"This email id is already registered.",-1),Dt=[St],$t={class:"form-outline mb-4"},Ct=(0,a._)("label",{class:"form-label",for:"form1Example23"},"Username",-1),Vt={key:0},Tt={key:1,class:"text-danger"},zt=(0,a._)("p",null,"This username is already taken.",-1),qt=[zt],xt={class:"form-outline mb-4"},Ut=(0,a._)("label",{class:"form-label",for:"form1Example33"},"First name",-1),At={class:"form-outline mb-4"},Ft=(0,a._)("label",{class:"form-label",for:"form1Example43"},"Last name",-1),jt={class:"form-outline mb-4"},Pt=(0,a._)("label",{class:"form-label",for:"form1Example53"},"Password",-1),Rt={class:"form-outline mb-4"},Mt=(0,a._)("label",{class:"form-label",for:"form1Example63"},"Re-enter your password",-1),It={class:"signup text-center"},Nt={key:0,type:"submit",class:"btn btn-primary btn-lg btn-block",disabled:""},Ht={key:1,type:"submit",class:"btn btn-primary btn-lg btn-block"},Lt=(0,a._)("strong",null,[(0,a.Uk)("Already registered? "),(0,a._)("a",{href:"/signin"},"Sign In")],-1),Bt=(0,a._)("br",null,null,-1),Et=(0,a._)("br",null,null,-1),Wt=(0,a._)("br",null,null,-1),Yt=(0,a._)("br",null,null,-1),Zt=(0,a._)("br",null,null,-1),Ot=(0,a._)("br",null,null,-1),Qt=(0,a._)("br",null,null,-1),Kt=(0,a._)("br",null,null,-1),Jt=(0,a._)("div",{class:"text-center"},[(0,a._)("a",{href:"/"},"Home")],-1);function Gt(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[mt])),_:1})]),(0,a._)("section",pt,[(0,a._)("form",{onSubmit:t[8]||(t[8]=(0,l.iM)(((...e)=>i.sendData&&i.sendData(...e)),["prevent"]))},[(0,a._)("div",_t,[(0,a._)("div",gt,[wt,(0,a._)("div",bt,[(0,a._)("div",vt,[ft,(0,a.wy)((0,a._)("input",{type:"email",id:"form1Example13",class:"form-control form-control-lg",placeholder:"Enter your email id","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),onInput:t[1]||(t[1]=e=>i.emailTaken()),required:""},null,544),[[l.nr,s.email]]),null===s.emailtaken?((0,a.wg)(),(0,a.iD)("div",kt)):s.emailtaken?((0,a.wg)(),(0,a.iD)("div",yt,Dt)):(0,a.kq)("",!0)]),(0,a._)("div",$t,[Ct,(0,a.wy)((0,a._)("input",{type:"username",id:"form1Example23",class:"form-control form-control-lg",placeholder:"Set an username","onUpdate:modelValue":t[2]||(t[2]=e=>s.username=e),onInput:t[3]||(t[3]=e=>i.usernameTaken()),required:""},null,544),[[l.nr,s.username]]),null===s.usernametaken?((0,a.wg)(),(0,a.iD)("div",Vt)):s.usernametaken?((0,a.wg)(),(0,a.iD)("div",Tt,qt)):(0,a.kq)("",!0)]),(0,a._)("div",xt,[Ut,(0,a.wy)((0,a._)("input",{type:"firstname",id:"form1Example33",class:"form-control form-control-lg",placeholder:"Enter your first &middle(if any) name","onUpdate:modelValue":t[4]||(t[4]=e=>s.first_name=e),required:""},null,512),[[l.nr,s.first_name]])]),(0,a._)("div",At,[Ft,(0,a.wy)((0,a._)("input",{type:"lastname",id:"form1Example43",class:"form-control form-control-lg",placeholder:"Enter your last name","onUpdate:modelValue":t[5]||(t[5]=e=>s.last_name=e),required:""},null,512),[[l.nr,s.last_name]])]),(0,a._)("div",jt,[Pt,(0,a.wy)((0,a._)("input",{type:"password",id:"form1Example53",class:"form-control form-control-lg",placeholder:"Password","onUpdate:modelValue":t[6]||(t[6]=e=>s.password=e),required:""},null,512),[[l.nr,s.password]])]),(0,a._)("div",Rt,[Mt,(0,a.wy)((0,a._)("input",{type:"password",id:"form1Example63",class:"form-control form-control-lg",placeholder:"Re-enter your password","onUpdate:modelValue":t[7]||(t[7]=e=>s.check=e),required:""},null,512),[[l.nr,s.check]])]),(0,a._)("div",It,[s.emailtaken||s.usernametaken||s.password!=s.check?((0,a.wg)(),(0,a.iD)("button",Nt,"Sign up")):(0,a.kq)("",!0),0==s.emailtaken&&0==s.usernametaken&&s.password.length>=8&&s.password==s.check?((0,a.wg)(),(0,a.iD)("button",Ht,"Sign up")):(0,a.kq)("",!0)])]),Lt])])],32)]),Bt,Et,Wt,Yt,Zt,Ot,Qt,Kt,Jt],64)}var Xt={name:"SignUp",data(){return{email:"",first_name:"",last_name:"",username:"",password:"",check:"",items:"",user:"",emailtaken:null,usernametaken:null,signupurl:""}},methods:{async sendData(){const e=this.signupurl,t={email:this.email,firstname:this.first_name,lastname:this.last_name,username:this.username,password:await ut(this.password)};try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok){const e=await n.json();console.log(e),this.$router.push("/signin")}else console.log(n.statusText)}catch(n){console.log(n)}},async emailTaken(){const e=await fetch(`${Be}api/email/${this.email}`);if(e.ok){const t=await e.json();console.log(t),this.emailtaken=t}else console.log(e.statusText)},async usernameTaken(){const e=await fetch(`${Be}api/username/${this.username}`);if(e.ok){const t=await e.json();console.log(t),this.usernametaken=t}else console.log(e.statusText)}},created(){const e=this.$route.meta.isadmin;this.signupurl=e?`${Be}api/admin/signup`:`${Be}signup`},mounted(){fetch(`${Be}signup`).then((e=>e.json())).then((e=>{this.items=e,console.log(e)})).catch((e=>{console.error("Error fetching data:",e)}))}};const en=(0,s.Z)(Xt,[["render",Gt]]);var tn=en;const nn=e=>((0,a.dD)("data-v-7b509b94"),e=e(),(0,a.Cn)(),e),ln={class:"navbar navbar-expand-lg navbar-dark bg-dark"},an={class:"container-fluid"},on=nn((()=>(0,a._)("a",{class:"navbar-brand",href:"/"},"Ticketing App",-1))),sn=nn((()=>(0,a._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1))),rn={class:"collapse navbar-collapse",id:"navbarSupportedContent"},un={class:"navbar-nav me-auto mb-2 mb-lg-0"},cn=nn((()=>(0,a._)("li",{class:"nav-item"},[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"/protected"},"Home")],-1))),dn={class:"nav-item"},hn={class:"nav-item"},mn={class:"nav-item"},pn={class:"nav-item"},_n=nn((()=>(0,a._)("i",{class:"bi bi-wallet"},null,-1))),gn={class:"nav-item dropdown"},wn=nn((()=>(0,a._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," My Account ",-1))),bn={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},vn={class:"dropdown-item"},fn=nn((()=>(0,a._)("li",null,[(0,a._)("hr",{class:"dropdown-divider"})],-1))),kn={class:"d-flex"},yn={class:"search-container"},Sn={key:0,class:"suggestions-list"},Dn=["onClick"],$n={class:"suggestion-type"},Cn=nn((()=>(0,a._)("h1",null,"Welcome to the User Protected Route",-1))),Vn={class:"child-center-container"};function Tn(e,t,n,o,s,i){const r=(0,a.up)("router-link"),u=(0,a.up)("BookingHistory"),c=(0,a.up)("SearchResults"),d=(0,a.up)("MyWallet"),m=(0,a.up)("HelpSupport"),p=(0,a.up)("ShowList"),_=(0,a.up)("VenueList"),g=(0,a.up)("UpdateProfile");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",ln,[(0,a._)("div",an,[on,sn,(0,a._)("div",rn,[(0,a._)("ul",un,[cn,(0,a._)("li",dn,[(0,a.Wm)(r,{class:"nav-link active",onClick:t[0]||(t[0]=e=>i.booknow()),to:{path:"/book"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Book Tickets")])),_:1})]),(0,a._)("li",hn,[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[1]||(t[1]=e=>i.show("open"))},"Shows")]),(0,a._)("li",mn,[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[2]||(t[2]=e=>i.venue("open"))},"Venues")]),(0,a._)("li",pn,[(0,a._)("a",{class:"nav-link active",href:"#",onClick:t[3]||(t[3]=(...e)=>i.MyWallet&&i.MyWallet(...e))},[(0,a.Uk)(" Wallet "),_n])]),(0,a._)("li",gn,[wn,(0,a._)("ul",bn,[(0,a._)("li",null,[(0,a._)("a",vn,[(0,a.Uk)("Hello! "),(0,a._)("b",null,(0,h.zw)(s.username),1)])]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[4]||(t[4]=e=>i.bookinghistory("open"))},"Booking history")]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[5]||(t[5]=e=>i.updateProfile("open"))},"My Profile")]),fn,(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[6]||(t[6]=e=>i.support("open"))},"Help & support")]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[7]||(t[7]=e=>i.logout())},"Sign out")])])])]),(0,a._)("form",kn,[(0,a._)("div",yn,[(0,a.wy)((0,a._)("input",{type:"search",placeholder:"Search","aria-label":"Search","onUpdate:modelValue":t[8]||(t[8]=e=>s.searchQuery=e),onInput:t[9]||(t[9]=(...e)=>i.handleSearchInput&&i.handleSearchInput(...e)),onKeyup:t[10]||(t[10]=(0,l.D2)(((...e)=>i.performSearch&&i.performSearch(...e)),["enter"])),class:"search-input"},null,544),[[l.nr,s.searchQuery]]),s.showSuggestions?((0,a.wg)(),(0,a.iD)("ul",Sn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.suggestions,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,onClick:t=>i.selectSuggestion(e)},[(0,a._)("span",null,(0,h.zw)(e.result),1),(0,a._)("span",$n,(0,h.zw)(e.type),1)],8,Dn)))),128))])):(0,a.kq)("",!0)])])])])]),s.history?((0,a.wg)(),(0,a.j4)(u,{key:0,username:s.username,onClose:t[11]||(t[11]=e=>i.bookinghistory("close"))},null,8,["username"])):(0,a.kq)("",!0),(0,a._)("div",null,[Cn,(0,a._)("p",null,"Email: "+(0,h.zw)(s.email),1),(0,a._)("p",null,"Username: "+(0,h.zw)(s.username),1)]),(0,a._)("div",Vn,[s.element?((0,a.wg)(),(0,a.j4)(c,{key:0,element:s.element},null,8,["element"])):(0,a.kq)("",!0),s.wallet?((0,a.wg)(),(0,a.j4)(d,{key:1,username:s.username},null,8,["username"])):(0,a.kq)("",!0)]),s.help?((0,a.wg)(),(0,a.j4)(m,{key:1,onClose:t[12]||(t[12]=e=>i.support("close"))})):(0,a.kq)("",!0),s.Show?((0,a.wg)(),(0,a.j4)(p,{key:2,list:s.showlist,onClose:t[13]||(t[13]=e=>i.show("close"))},null,8,["list"])):(0,a.kq)("",!0),s.Venue?((0,a.wg)(),(0,a.j4)(_,{key:3,list:s.venuelist,onClose:t[14]||(t[14]=e=>i.venue("close"))},null,8,["list"])):(0,a.kq)("",!0),s.UpdateProfile?((0,a.wg)(),(0,a.j4)(g,{key:4,username:s.username,onClose:t[15]||(t[15]=e=>i.updateProfile("close"))},null,8,["username"])):(0,a.kq)("",!0)],64)}const zn=e=>((0,a.dD)("data-v-1296b530"),e=e(),(0,a.Cn)(),e),qn={class:"modal"},xn={class:"modal-content"},Un=zn((()=>(0,a._)("h2",null,"Booking History",-1))),An=zn((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Venue Name"),(0,a._)("th",null,"Venue Place"),(0,a._)("th",null,"Venue Location"),(0,a._)("th",null,"Show Name"),(0,a._)("th",null,"Date"),(0,a._)("th",null,"Time"),(0,a._)("th",null,"No of tickets booked"),(0,a._)("th",null,"Ticket Price"),(0,a._)("th",null,"Rate now")],-1))),Fn=["onClick"];function jn(e,t,n,l,o,s){const i=(0,a.up)("RateNow"),r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",qn,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",xn,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),Un,(0,a._)("table",null,[An,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.links,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.venue_name),1),(0,a._)("td",null,(0,h.zw)(e.place),1),(0,a._)("td",null,(0,h.zw)(e.location),1),(0,a._)("td",null,(0,h.zw)(e.show_name),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.tickets_booked),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1),(0,a._)("td",null,[null===e.rating?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary btn-sm",onClick:t=>s.openrating(e)},"Rate Now",8,Fn)):(0,a.kq)("",!0),(0,a._)("a",null,(0,h.zw)(e.rating),1)]),e.modifier?((0,a.wg)(),(0,a.j4)(i,{key:0,show_id:e.show_id,user_id:e.user_id,onClose:t=>s.closerating(e)},null,8,["show_id","user_id","onClose"])):(0,a.kq)("",!0)])))),128))])])])),_:1})])}const Pn=e=>((0,a.dD)("data-v-fc8291cc"),e=e(),(0,a.Cn)(),e),Rn={class:"modal"},Mn={class:"modal-content"},In=Pn((()=>(0,a._)("h1",null,"Please rate the show:",-1))),Nn={class:"rating"},Hn=Pn((()=>(0,a._)("label",{for:"rating-5"},"★",-1))),Ln=Pn((()=>(0,a._)("label",{for:"rating-4"},"★",-1))),Bn=Pn((()=>(0,a._)("label",{for:"rating-3"},"★",-1))),En=Pn((()=>(0,a._)("label",{for:"rating-2"},"★",-1))),Wn=Pn((()=>(0,a._)("label",{for:"rating-1"},"★",-1))),Yn={key:0,type:"submit"};function Zn(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Rn,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",Mn,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),In,(0,a._)("form",{onSubmit:t[6]||(t[6]=(0,l.iM)((e=>i.rate("http://127.0.0.1:8080/api/bookinghistory",{show_id:n.show_id,user_id:n.user_id,rating:s.rating})),["prevent"])),method:"POST"},[(0,a._)("div",Nn,[(0,a.wy)((0,a._)("input",{type:"radio",name:"rating",id:"rating-5",value:"5","onUpdate:modelValue":t[1]||(t[1]=e=>s.rating=e)},null,512),[[l.G2,s.rating]]),Hn,(0,a.wy)((0,a._)("input",{type:"radio",name:"rating",id:"rating-4",value:"4","onUpdate:modelValue":t[2]||(t[2]=e=>s.rating=e)},null,512),[[l.G2,s.rating]]),Ln,(0,a.wy)((0,a._)("input",{type:"radio",name:"rating",id:"rating-3",value:"3","onUpdate:modelValue":t[3]||(t[3]=e=>s.rating=e)},null,512),[[l.G2,s.rating]]),Bn,(0,a.wy)((0,a._)("input",{type:"radio",name:"rating",id:"rating-2",value:"2","onUpdate:modelValue":t[4]||(t[4]=e=>s.rating=e)},null,512),[[l.G2,s.rating]]),En,(0,a.wy)((0,a._)("input",{type:"radio",name:"rating",id:"rating-1",value:"1","onUpdate:modelValue":t[5]||(t[5]=e=>s.rating=e)},null,512),[[l.G2,s.rating]]),Wn]),s.rating?((0,a.wg)(),(0,a.iD)("button",Yn,"Submit Rating")):(0,a.kq)("",!0)],32)])])),_:1})])}var On=n(8582),Qn=n.n(On);async function Kn(e,t,n){const l=localStorage.getItem("authToken"),a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(t)});try{if(a.ok){const e=await a.json();console.log(e),Qn().alert(e.message)}else{console.log(a.statusText);const e=await a.json();console.log(e),Qn().alert(a.statusText),"Token has expired"!==e.message&&"Token is missing"!==e.message&&"Token is invalid"!==e.message||n.push("/signin")}}catch(o){Qn().alert(o)}}var Jn={name:"RateNow",props:{show_id:{type:Number,required:!0},user_id:{type:Number,required:!0}},data(){return{rating:null}},methods:{closeForm(){console.log(Be),this.$emit("close")},rate(e,t){Kn(e,t,this.$router),this.$emit("close")}}};const Gn=(0,s.Z)(Jn,[["render",Zn],["__scopeId","data-v-fc8291cc"]]);var Xn=Gn,el={name:"BookingHistory",props:{username:{type:String,required:!0}},components:{RateNow:Xn},data(){return{links:null}},methods:{closeForm(){this.$emit("close")},openrating(e){e.modifier=!0},closerating(e){e.modifier=!1,location.reload()}},created(){B(`${Be}api/bookinghistory?id=${this.username}`).then((e=>this.links=e))}};const tl=(0,s.Z)(el,[["render",jn],["__scopeId","data-v-1296b530"]]);var nl=tl;const ll={class:"modal"},al={class:"modal-content"},ol=(0,a._)("p",null,null,-1),sl=(0,a._)("p",null,null,-1),il=(0,a._)("h4",null,"For any kind of help or support, feel free to drop an email",-1),rl=(0,a._)("p",null,[(0,a.Uk)("Email:-"),(0,a._)("strong",null,"21f1000460@ds.study.iitm.ac.in")],-1);function ul(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",ll,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",al,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),ol,sl,il,rl])])),_:1})])}var cl={name:"HelpSupport",methods:{closeForm(){this.$emit("close")}}};const dl=(0,s.Z)(cl,[["render",ul]]);var hl=dl;const ml={class:"modal"},pl={class:"modal-content"},_l=(0,a._)("h2",null,"Update Profile",-1),gl=(0,a._)("label",{for:"username"},"Username",-1),wl=(0,a._)("br",null,null,-1),bl=(0,a._)("br",null,null,-1),vl=(0,a._)("label",{for:"email"},"Email",-1),fl=(0,a._)("br",null,null,-1),kl=(0,a._)("br",null,null,-1),yl=(0,a._)("label",{for:"first_name"},"First name",-1),Sl=(0,a._)("br",null,null,-1),Dl=(0,a._)("br",null,null,-1),$l=(0,a._)("label",{for:"last_name"},"Last name",-1),Cl=(0,a._)("br",null,null,-1),Vl=(0,a._)("br",null,null,-1),Tl=(0,a._)("label",{for:"password"},"Password",-1),zl=(0,a._)("br",null,null,-1),ql=(0,a._)("br",null,null,-1),xl=(0,a._)("label",{for:"password"},"Re-enter password",-1),Ul=(0,a._)("br",null,null,-1),Al=(0,a._)("br",null,null,-1),Fl={key:0,type:"submit",class:"btn btn-primary btn-sm",value:"Update Profile"};function jl(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",ml,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",pl,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),_l,(0,a._)("form",{method:"PATCH",onSubmit:t[7]||(t[7]=(0,l.iM)(((...e)=>i.updateProfile&&i.updateProfile(...e)),["prevent"]))},[gl,(0,a.wy)((0,a._)("input",{type:"text",name:"username",placeholder:"username","onUpdate:modelValue":t[1]||(t[1]=e=>s.Username=e),disabled:"",required:""},null,512),[[l.nr,s.Username]]),wl,bl,vl,(0,a.wy)((0,a._)("input",{type:"email",name:"email",placeholder:"Email","onUpdate:modelValue":t[2]||(t[2]=e=>s.email=e),disabled:"",required:""},null,512),[[l.nr,s.email]]),fl,kl,yl,(0,a.wy)((0,a._)("input",{type:"text",name:"first_name",placeholder:"First Name","onUpdate:modelValue":t[3]||(t[3]=e=>s.first_name=e),required:""},null,512),[[l.nr,s.first_name]]),Sl,Dl,$l,(0,a.wy)((0,a._)("input",{type:"text",name:"last_name",placeholder:"Last Name","onUpdate:modelValue":t[4]||(t[4]=e=>s.last_name=e),required:""},null,512),[[l.nr,s.last_name]]),Cl,Vl,Tl,(0,a.wy)((0,a._)("input",{type:"password",minlength:"8",name:"password",placeholder:"Set new password","onUpdate:modelValue":t[5]||(t[5]=e=>s.password=e),required:""},null,512),[[l.nr,s.password]]),zl,ql,xl,(0,a.wy)((0,a._)("input",{type:"password",minlength:"8",name:"password",placeholder:"Re-type new password","onUpdate:modelValue":t[6]||(t[6]=e=>s.check=e),required:""},null,512),[[l.nr,s.check]]),Ul,Al,s.password===s.check?((0,a.wg)(),(0,a.iD)("button",Fl,"Update Profile")):(0,a.kq)("",!0)],32)])])),_:1})])}var Pl={name:"UpdateProfile",props:{username:{type:String,required:!0}},data(){return{Username:"",email:"",first_name:"",last_name:"",password:"",check:""}},methods:{async updateProfile(){const e=await fetch(`${Be}api/profile`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},method:"PATCH",body:JSON.stringify({username:this.Username,first_name:this.first_name,last_name:this.last_name,password:ut(this.password)})});if(e.ok){const t=await e.json();Qn().alert(t.message)}else Qn().alert("Something went wrong");this.$emit("close")},closeForm(){this.$emit("close")}},mounted(){this.Username=this.username,B(`${Be}api/profile?username=${this.username}`).then((e=>{this.email=e.email,this.first_name=e.first_name,this.last_name=e.last_name}))}};const Rl=(0,s.Z)(Pl,[["render",jl]]);var Ml=Rl;const Il={key:0},Nl={key:1},Hl=(0,a._)("br",null,null,-1),Ll=(0,a._)("p",null,null,-1),Bl=(0,a._)("label",{for:"addmoney"},"Add money",-1),El={key:0,class:"btn btn-primary btn-sm",type:"submit"};function Wl(e,t,n,o,s,i){return null===s.balance?((0,a.wg)(),(0,a.iD)("div",Il,[(0,a._)("button",{class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>i.activate&&i.activate(...e))},"Activate wallet")])):s.balance>=0?((0,a.wg)(),(0,a.iD)("div",Nl,[(0,a.Uk)(" Your wallet balance is ₹"+(0,h.zw)(s.balance),1),Hl,Ll,(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,l.iM)(((...e)=>i.addMoney&&i.addMoney(...e)),["prevent"])),class:"add-money-form"},[Bl,(0,a.wy)((0,a._)("input",{type:"number",name:"addmoney","onUpdate:modelValue":t[1]||(t[1]=e=>s.load=e),min:"10",max:"10000"},null,512),[[l.nr,s.load]]),s.load>=10?((0,a.wg)(),(0,a.iD)("button",El,"Add Money")):(0,a.kq)("",!0)],32)])):(0,a.kq)("",!0)}var Yl={name:"MyWallet",props:{username:{type:String,required:!0}},data(){return{balance:null,load:null}},methods:{async activate(){const e=await fetch(`${Be}/api/wallet`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({add_money:0,username:this.username})});if(e.ok){const t=await e.json();Qn().alert(t.message),location.reload()}else Qn().alert((await e).statusText)},async addMoney(){const e=await fetch(`${Be}/api/wallet`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({add_money:this.load,username:this.username})});if(e.ok){const t=await e.json();await Qn().alert(t.message),setTimeout((()=>{location.reload()}),5e3)}else Qn().alert((await e).statusText)}},mounted(){console.log(Be),B(`${Be}/api/wallet?username=${this.username}`).then((e=>this.balance=e))}};const Zl=(0,s.Z)(Yl,[["render",Wl]]);var Ol=Zl,Ql={name:"DashBoard",components:{BookingHistory:nl,HelpSupport:hl,ShowList:Ue,VenueList:Le,SearchResults:ye,UpdateProfile:Ml,MyWallet:Ol},data(){return{email:"",username:"",history:!1,help:!1,Show:!1,Venue:!1,venuelist:null,showlist:null,searchQuery:"",suggestions:null,element:null,showSuggestions:!1,UpdateProfile:!1,wallet:!1}},methods:{logout(){this.$store.commit("role",null),localStorage.removeItem("authToken"),alert("Logged out successfully \n Redirecting to sign in page."),location.reload()},autoRefresh(){setTimeout((()=>{location.reload()}),1e3)},booknow(){B(`${Be}api/book`).then((e=>this.list=e))},bookinghistory(e){"open"===e?this.history=!0:"close"===e&&(this.history=!1)},support(e){"open"===e?this.help=!0:"close"===e&&(this.help=!1)},show(e){"open"===e?(B(`${Be}api/show`).then((e=>this.showlist=e)),this.Show=!0):"close"===e&&(this.Show=!1)},venue(e){"open"===e?(B(`${Be}api/venue`).then((e=>this.venuelist=e)),this.Venue=!0):"close"===e&&(this.Venue=!1)},async handleSearchInput(){this.searchQuery.length>0?(await B(`${Be}api/search?query=${this.searchQuery}`).then((e=>{this.suggestions=e})),this.suggestions.filter((e=>e.result.toLowerCase().includes(this.searchQuery.toLowerCase()))),this.showSuggestions=!0):(this.showSuggestions=!1,this.suggestions=[])},selectSuggestion(e){console.log("Selected suggestion:",e),this.searchQuery=e.result,this.element=e,this.showSuggestions=!1},performSearch(){console.log("Performing search:",this.searchQuery,this.element),this.searchQuery="",this.showSuggestions=!1},updateProfile(e){"open"===e?this.UpdateProfile=!0:"close"===e&&(this.UpdateProfile=!1)},MyWallet(){this.wallet=!0}},mounted(){const e=localStorage.getItem("authToken");console.log(e),fetch(`${Be}user/protected`,{headers:{Authorization:`Bearer ${e}`}}).then((e=>{if(e.ok)return this.$store.commit("role","user"),e.json();this.$store.commit("role",null),localStorage.removeItem("authToken"),this.$router.push("/signin")})).then((e=>{this.username=e.username,this.email=e.email})).catch((e=>{console.error(e),e.message}))},created(){}};const Kl=(0,s.Z)(Ql,[["render",Tn],["__scopeId","data-v-7b509b94"]]);var Jl=Kl;const Gl=e=>((0,a.dD)("data-v-5b09e7ce"),e=e(),(0,a.Cn)(),e),Xl=Gl((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Name"),(0,a._)("th",null,"Place"),(0,a._)("th",null,"Location"),(0,a._)("th",null,"Capacity"),(0,a._)("th",null,"Action")],-1))),ea=["href"],ta=["onClick"],na=Gl((()=>(0,a._)("footer",null,[(0,a._)("a",{href:"/admin/dashboard"},"Back to home")],-1)));function la(e,t,n,l,o,s){const i=(0,a.up)("VenueModification");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("table",null,[Xl,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.venuelist,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("a",{href:`/admin/venuelink/${e.id}`},(0,h.zw)(e.name),9,ea)]),(0,a._)("td",null,(0,h.zw)(e.place),1),(0,a._)("td",null,(0,h.zw)(e.location),1),(0,a._)("td",null,(0,h.zw)(e.capacity),1),(0,a._)("td",null,[(0,a._)("a",{href:"#",onClick:t=>s.venueupdate(e)},"Update",8,ta)]),e.Modifier?((0,a.wg)(),(0,a.j4)(i,{key:0,id:e.id,onClose:t=>s.venueupdated(e),onSubmit:s.submit},null,8,["id","onClose","onSubmit"])):(0,a.kq)("",!0)])))),128))]),na],64)}const aa=e=>((0,a.dD)("data-v-bd59746c"),e=e(),(0,a.Cn)(),e),oa={class:"modal"},sa={class:"modal-content"},ia=aa((()=>(0,a._)("h2",null,"Update Venue",-1))),ra={method:"PATCH"},ua=aa((()=>(0,a._)("label",{for:"venue"},"Venue Name: ",-1))),ca=aa((()=>(0,a._)("br",null,null,-1))),da=aa((()=>(0,a._)("br",null,null,-1))),ha=aa((()=>(0,a._)("label",{for:"place"},"Place:",-1))),ma=aa((()=>(0,a._)("br",null,null,-1))),pa=aa((()=>(0,a._)("br",null,null,-1))),_a=aa((()=>(0,a._)("label",{for:"location"},"Location:",-1))),ga=aa((()=>(0,a._)("br",null,null,-1))),wa=aa((()=>(0,a._)("br",null,null,-1))),ba=aa((()=>(0,a._)("label",{for:"capacity"},"Capacity:",-1))),va=aa((()=>(0,a._)("br",null,null,-1))),fa=aa((()=>(0,a._)("br",null,null,-1)));function ka(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",oa,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",sa,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),ia,(0,a._)("form",ra,[ua,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),placeholder:"Show name",name:"venue",required:""},null,512),[[l.nr,s.name]]),ca,da,ha,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.place=e),placeholder:"Place",name:"place",required:""},null,512),[[l.nr,s.place]]),ma,pa,_a,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>s.location=e),placeholder:"Location",name:"location",required:""},null,512),[[l.nr,s.location]]),ga,wa,ba,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>s.capacity=e),placeholder:"Capacity",name:"capacity",required:""},null,512),[[l.nr,s.capacity]]),va,fa,(0,a._)("button",{type:"submit",onClick:t[5]||(t[5]=(...e)=>i.submitForm&&i.submitForm(...e)),class:"btn btn-primary btn lg"},"Submit")])])])),_:1})])}var ya={name:"VenueModification",props:{id:{type:Number,required:!0}},data(){return{venue_id:null,name:"",place:"",location:"",capacity:null}},methods:{closeForm(){this.$emit("close")},submitForm(e){e.preventDefault(),this.$emit("submit",{id:this.venue_id,name:this.name,place:this.place,location:this.location,capacity:this.capacity})}},mounted(){this.venue_id=this.id,fetch(`${Be}api/venue?id=${this.venue_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.venue.name,this.place=e.venue.place,this.location=e.venue.location,this.capacity=e.venue.capacity})).catch((e=>{console.log(e)}))}};const Sa=(0,s.Z)(ya,[["render",ka],["__scopeId","data-v-bd59746c"]]);var Da=Sa,$a={name:"ModifyVenue",components:{VenueModification:Da},data(){return{username:"",email:"",venuelist:null,id:null}},methods:{async get(e){const t=await fetch(e,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});try{if(t.ok){const e=await t.json();this.venuelist=e,console.log(e),console.log(this.venuelist)}else console.log(t.statusText)}catch(n){console.log(n)}},venueupdate(e){e.Modifier=!0,this.id=e.id},venueupdated(e){e.Modifier=!1,this.id=null},async submit(e){try{const t=await fetch(`${Be}api/venue`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({id:e.id,name:e.name,place:e.place,location:e.location,capacity:e.capacity})});if(t.ok){for(let t=0;t<=this.venuelist.length;t++)this.venuelist[t].id==this.id&&(this.venuelist[t].Modifier=!1,this.id=null);const e=await t.json();console.log(e.msg)}else console.log(t.statusText)}catch(t){console.log(t)}}},watch:{id(e,t){console.log(`${t} changed to ${e}`),null===e&&location.reload()}},mounted(){fetch(`${Be}protected`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();localStorage.removeItem("authToken"),this.$router.push("/signin")})).then((e=>{this.username=e.username,this.email=e.email,this.get(`${Be}api/venue`)})).catch((e=>{console.error(e),e.message}))}};const Ca=(0,s.Z)($a,[["render",la],["__scopeId","data-v-5b09e7ce"]]);var Va=Ca;const Ta=e=>((0,a.dD)("data-v-47adf5dd"),e=e(),(0,a.Cn)(),e),za=Ta((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Name"),(0,a._)("th",null,"Rating"),(0,a._)("th",null,"Tags"),(0,a._)("th",null,"Actions")],-1))),qa=["href"],xa=["onClick"],Ua=Ta((()=>(0,a._)("footer",null,[(0,a._)("a",{href:"/admin/dashboard"},"Back to home")],-1)));function Aa(e,t,n,l,o,s){const i=(0,a.up)("ShowModification");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("table",null,[za,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.showlist,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("a",{href:`/admin/showlink/${e.id}`},(0,h.zw)(e.name),9,qa)]),(0,a._)("td",null,(0,h.zw)(e.rating),1),(0,a._)("td",null,(0,h.zw)(e.tags),1),(0,a._)("td",null,[(0,a._)("a",{href:"#",onClick:t=>s.showupdate(e)},"Update",8,xa)]),e.Modifier?((0,a.wg)(),(0,a.j4)(i,{key:0,id:e.id,onClose:t=>s.showupdated(e),onSubmit:s.submit},null,8,["id","onClose","onSubmit"])):(0,a.kq)("",!0)])))),128))]),Ua],64)}const Fa=e=>((0,a.dD)("data-v-c9d1c42a"),e=e(),(0,a.Cn)(),e),ja={class:"modal"},Pa={class:"modal-content"},Ra=Fa((()=>(0,a._)("h2",null,"Update Show",-1))),Ma={method:"PATCH"},Ia=Fa((()=>(0,a._)("label",{for:"show"},"Show Name: ",-1))),Na=Fa((()=>(0,a._)("br",null,null,-1))),Ha=Fa((()=>(0,a._)("br",null,null,-1))),La=Fa((()=>(0,a._)("label",{for:"tags"},"Tags: ",-1))),Ba=Fa((()=>(0,a._)("option",{value:"Action"},"Action",-1))),Ea=Fa((()=>(0,a._)("option",{value:"Comedy"},"Comedy",-1))),Wa=Fa((()=>(0,a._)("option",{value:"Drama"},"Drama",-1))),Ya=Fa((()=>(0,a._)("option",{value:"Sci-Fi"},"Sci-Fi",-1))),Za=Fa((()=>(0,a._)("option",{value:"Fiction"},"Fiction",-1))),Oa=Fa((()=>(0,a._)("option",{value:"Horror"},"Horror",-1))),Qa=Fa((()=>(0,a._)("option",{value:"Romance"},"Romance",-1))),Ka=[Ba,Ea,Wa,Ya,Za,Oa,Qa],Ja=Fa((()=>(0,a._)("br",null,null,-1))),Ga=Fa((()=>(0,a._)("br",null,null,-1))),Xa=Fa((()=>(0,a._)("label",{for:"rating"},"Rating:",-1))),eo=Fa((()=>(0,a._)("option",{value:"1"},"1",-1))),to=Fa((()=>(0,a._)("option",{value:"2"},"2",-1))),no=Fa((()=>(0,a._)("option",{value:"3"},"3",-1))),lo=Fa((()=>(0,a._)("option",{value:"4"},"4",-1))),ao=Fa((()=>(0,a._)("option",{value:"5"},"5",-1))),oo=[eo,to,no,lo,ao],so=Fa((()=>(0,a._)("br",null,null,-1))),io=Fa((()=>(0,a._)("br",null,null,-1)));function ro(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",ja,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",Pa,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),Ra,(0,a._)("form",Ma,[Ia,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),placeholder:"Show name",name:"show",required:""},null,512),[[l.nr,s.name]]),Na,Ha,La,(0,a.wy)((0,a._)("select",{name:"tags","onUpdate:modelValue":t[2]||(t[2]=e=>s.tags=e),class:"select",required:""},Ka,512),[[l.bM,s.tags]]),Ja,Ga,Xa,(0,a.wy)((0,a._)("select",{name:"rating","onUpdate:modelValue":t[3]||(t[3]=e=>s.rating=e),class:"select",required:""},oo,512),[[l.bM,s.rating,void 0,{number:!0}]]),so,io,(0,a._)("button",{type:"submit",onClick:t[4]||(t[4]=(...e)=>i.submitForm&&i.submitForm(...e)),class:"btn btn-primary btn lg"},"Submit")])])])),_:1})])}var uo={name:"ShowModification",props:{id:{type:Number,required:!0}},data(){return{show_id:null,name:"",tags:"",rating:null}},methods:{closeForm(){this.$emit("close")},submitForm(e){e.preventDefault(),this.$emit("submit",{id:this.show_id,name:this.name,tags:this.tags,rating:this.rating})}},mounted(){this.show_id=this.id,fetch(`${Be}api/show?id=${this.show_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.show.name,this.rating=e.show.rating,this.tags=e.show.tags})).catch((e=>{console.log(e)}))}};const co=(0,s.Z)(uo,[["render",ro],["__scopeId","data-v-c9d1c42a"]]);var ho=co,mo={name:"ModifyShow",components:{ShowModification:ho},data(){return{username:"",email:"",showlist:null,id:null}},methods:{async get(e){const t=await fetch(e,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});try{if(t.ok){const e=await t.json();this.showlist=e,console.log(e),console.log(this.showlist)}else console.log(t.statusText)}catch(n){console.log(n)}},showupdate(e){e.Modifier=!0,this.id=e.id},showupdated(e){e.Modifier=!1,this.id=null},async submit(e){try{const t=await fetch(`${Be}api/show`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify({id:e.id,name:e.name,rating:e.rating,tags:e.tags})});if(t.ok){for(let t=0;t<=this.showlist.length;t++)this.showlist[t].id===this.id&&(this.showlist[t].Modifier=!1,this.id=null);const e=await t.json();console.log(e.msg)}else console.log(t.statusText)}catch(t){console.log(t)}}},watch:{id(e,t){console.log(`${t} changed to ${e}`),null===e&&location.reload()}},mounted(){fetch(`${Be}protected`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();localStorage.removeItem("authToken"),this.$router.push("/signin")})).then((e=>{this.username=e.username,this.email=e.email,this.get(`${Be}api/show`)})).catch((e=>{console.error(e),e.message}))}};const po=(0,s.Z)(mo,[["render",Aa],["__scopeId","data-v-47adf5dd"]]);var _o=po;const go=e=>((0,a.dD)("data-v-7d38ce8f"),e=e(),(0,a.Cn)(),e),wo={class:"navbar navbar-expand-lg navbar-dark bg-dark"},bo={class:"container-fluid"},vo=go((()=>(0,a._)("a",{class:"navbar-brand",href:"/"},"Ticketing App",-1))),fo=go((()=>(0,a._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1))),ko={class:"collapse navbar-collapse",id:"navbarSupportedContent"},yo={class:"navbar-nav me-auto mb-2 mb-lg-0"},So=go((()=>(0,a._)("li",{class:"nav-item"},[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"/admin/dashboard"},"Home")],-1))),Do={class:"nav-item"},$o={class:"nav-item"},Co={class:"nav-item dropdown"},Vo=go((()=>(0,a._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Show Management ",-1))),To={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},zo=go((()=>(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"/modify/show"},"Modify Show")],-1))),qo={class:"nav-item dropdown"},xo=go((()=>(0,a._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Venue Management ",-1))),Uo={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Ao=go((()=>(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"/modify/venue"},"Modify Venue")],-1))),Fo={class:"nav-item dropdown"},jo=go((()=>(0,a._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Stats ",-1))),Po={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},Ro={class:"nav-item dropdown"},Mo=go((()=>(0,a._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," My Account ",-1))),Io={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},No={class:"dropdown-item"},Ho=go((()=>(0,a._)("li",null,[(0,a._)("hr",{class:"dropdown-divider"})],-1))),Lo={class:"d-flex"},Bo={class:"search-container"},Eo={key:0,class:"suggestions-list"},Wo=["onClick"],Yo={class:"suggestion-type"},Zo=go((()=>(0,a._)("h1",null,"Welcome to the Admin Protected Route",-1))),Oo={class:"child-center-container"},Qo={class:"child-center-container"};function Ko(e,t,n,o,s,i){const r=(0,a.up)("AddShow"),u=(0,a.up)("ShowList"),c=(0,a.up)("AddVenue"),d=(0,a.up)("VenueList"),m=(0,a.up)("RemoveVenue"),p=(0,a.up)("RemoveShow"),_=(0,a.up)("HelpSupport"),g=(0,a.up)("ExportVenue"),w=(0,a.up)("UpdateProfile"),b=(0,a.up)("SearchResults"),v=(0,a.up)("VisualStats");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",wo,[(0,a._)("div",bo,[vo,fo,(0,a._)("div",ko,[(0,a._)("ul",yo,[So,(0,a._)("li",Do,[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[0]||(t[0]=e=>i.openshow("check"))},"Shows")]),(0,a._)("li",$o,[(0,a._)("a",{class:"nav-link active","aria-current":"page",href:"#",onClick:t[1]||(t[1]=e=>i.openvenue("check"))},"Venues")]),(0,a._)("li",Co,[Vo,(0,a._)("ul",To,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[2]||(t[2]=e=>i.openshow("add"))},"Add Show")]),zo,(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[3]||(t[3]=(0,l.iM)((e=>i.openshow("rem")),["prevent"]))},"Remove Show")])])]),(0,a._)("li",qo,[xo,(0,a._)("ul",Uo,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[4]||(t[4]=(...e)=>i.openAddvenue&&i.openAddvenue(...e))},"Add Venue")]),Ao,(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[5]||(t[5]=(0,l.iM)((e=>i.openvenue("rem")),["prevent"]))},"Remove Venue")]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item","aria-current":"page",href:"#",onClick:t[6]||(t[6]=e=>i.exportvenue("open"))},"Export Venue")])])]),(0,a._)("li",Fo,[jo,(0,a._)("ul",Po,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[7]||(t[7]=e=>i.stats("show"))},"Show Stats")]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[8]||(t[8]=e=>i.stats("venue"))},"Venue Stats")])])]),(0,a._)("li",Ro,[Mo,(0,a._)("ul",Io,[(0,a._)("li",null,[(0,a._)("a",No,[(0,a.Uk)("Hello! "),(0,a._)("b",null,(0,h.zw)(s.username),1)])]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[9]||(t[9]=e=>i.updateProfile("open"))},"Update Profile")]),Ho,(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[10]||(t[10]=e=>i.support("open"))},"Help & support")]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item",href:"#",onClick:t[11]||(t[11]=e=>i.logout())},"Sign out")])])])]),(0,a._)("form",Lo,[(0,a._)("div",Bo,[(0,a.wy)((0,a._)("input",{type:"search",placeholder:"Search","aria-label":"Search","onUpdate:modelValue":t[12]||(t[12]=e=>s.searchQuery=e),onInput:t[13]||(t[13]=(...e)=>i.handleSearchInput&&i.handleSearchInput(...e)),onKeyup:t[14]||(t[14]=(0,l.D2)(((...e)=>i.performSearch&&i.performSearch(...e)),["enter"])),class:"search-input"},null,544),[[l.nr,s.searchQuery]]),s.showSuggestions?((0,a.wg)(),(0,a.iD)("ul",Eo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.suggestions,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,onClick:t=>i.selectSuggestion(e)},[(0,a._)("span",null,(0,h.zw)(e.result),1),(0,a._)("span",Yo,(0,h.zw)(e.type),1)],8,Wo)))),128))])):(0,a.kq)("",!0)])])])])]),s.addShow?((0,a.wg)(),(0,a.j4)(r,{key:0,list:s.venuelist,onClose:i.closeAddshow,onSubmitData:i.addShowfn},null,8,["list","onClose","onSubmitData"])):(0,a.kq)("",!0),s.Show?((0,a.wg)(),(0,a.j4)(u,{key:1,list:s.showlist,onClose:t[15]||(t[15]=e=>i.closeshow("add"))},null,8,["list"])):(0,a.kq)("",!0),s.addVenue?((0,a.wg)(),(0,a.j4)(c,{key:2,onClose:i.closeAddvenue,onSubmitData:i.addVenuefn},null,8,["onClose","onSubmitData"])):(0,a.kq)("",!0),s.Venue?((0,a.wg)(),(0,a.j4)(d,{key:3,list:s.venuelist,onClose:t[16]||(t[16]=e=>i.closevenue("check"))},null,8,["list"])):(0,a.kq)("",!0),s.VenueRemoval?((0,a.wg)(),(0,a.j4)(m,{key:4,list:s.venuelist,onClose:t[17]||(t[17]=e=>i.closevenue("rem")),onRemove:i.erasevenue},null,8,["list","onRemove"])):(0,a.kq)("",!0),s.ShowRemoval?((0,a.wg)(),(0,a.j4)(p,{key:5,list:s.showlist,onClose:t[18]||(t[18]=e=>i.closeshow("rem")),onRemove:i.eraseshow},null,8,["list","onRemove"])):(0,a.kq)("",!0),s.help?((0,a.wg)(),(0,a.j4)(_,{key:6,onClose:t[19]||(t[19]=e=>i.support("close"))})):(0,a.kq)("",!0),s.Export?((0,a.wg)(),(0,a.j4)(g,{key:7,list:s.venuelist,username:s.username,onClose:t[20]||(t[20]=e=>i.exportvenue("close"))},null,8,["list","username"])):(0,a.kq)("",!0),s.UpdateProfile?((0,a.wg)(),(0,a.j4)(w,{key:8,username:s.username,onClose:t[21]||(t[21]=e=>i.updateProfile("close"))},null,8,["username"])):(0,a.kq)("",!0),(0,a._)("div",null,[Zo,(0,a._)("p",null,"Email: "+(0,h.zw)(s.email),1),(0,a._)("p",null,"Username: "+(0,h.zw)(s.username),1)]),(0,a._)("div",Oo,[s.element?((0,a.wg)(),(0,a.j4)(b,{key:0,element:s.element},null,8,["element"])):(0,a.kq)("",!0)]),(0,a._)("div",Qo,[s.Stats?((0,a.wg)(),(0,a.j4)(v,{key:0,name:s.Stats},null,8,["name"])):(0,a.kq)("",!0)])],64)}const Jo={class:"modal"},Go={class:"modal-content"},Xo=(0,a._)("h2",null,"Add new show",-1),es=(0,a._)("label",{for:"show"},"Show Name: ",-1),ts=(0,a._)("br",null,null,-1),ns=(0,a._)("br",null,null,-1),ls={key:0},as=(0,a._)("label",{for:"rating",class:"label"},"Rating:",-1),os=(0,a._)("option",{value:"1"},"1",-1),ss=(0,a._)("option",{value:"2"},"2",-1),is=(0,a._)("option",{value:"3"},"3",-1),rs=(0,a._)("option",{value:"4"},"4",-1),us=(0,a._)("option",{value:"5"},"5",-1),cs=[os,ss,is,rs,us],ds=(0,a._)("br",null,null,-1),hs=(0,a._)("br",null,null,-1),ms=(0,a._)("label",{for:"tags"},"Tags: ",-1),ps=(0,a._)("option",{value:"Action"},"Action",-1),_s=(0,a._)("option",{value:"Comedy"},"Comedy",-1),gs=(0,a._)("option",{value:"Drama"},"Drama",-1),ws=(0,a._)("option",{value:"Sci-Fi"},"Sci-Fi",-1),bs=(0,a._)("option",{value:"Fiction"},"Fiction",-1),vs=(0,a._)("option",{value:"Horror"},"Horror",-1),fs=(0,a._)("option",{value:"Romance"},"Romance",-1),ks=[ps,_s,gs,ws,bs,vs,fs],ys=(0,a._)("br",null,null,-1),Ss=(0,a._)("br",null,null,-1),Ds=(0,a._)("label",{for:"venue",class:"label"},"Venue",-1),$s=["value"],Cs=(0,a._)("br",null,null,-1),Vs=(0,a._)("br",null,null,-1),Ts=(0,a._)("label",{for:"date"},"Date: ",-1),zs=(0,a._)("br",null,null,-1),qs=(0,a._)("br",null,null,-1),xs=(0,a._)("label",{for:"time"},"Time: ",-1),Us=(0,a._)("br",null,null,-1),As=(0,a._)("br",null,null,-1),Fs=(0,a._)("label",{for:"price"},"Ticket price: ₹",-1),js=(0,a._)("br",null,null,-1),Ps=(0,a._)("br",null,null,-1),Rs={key:1,type:"submit",class:"btn btn-primary btn-lg"};function Ms(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Jo,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",Go,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),Xo,(0,a._)("form",{onSubmit:t[9]||(t[9]=(0,l.iM)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[es,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),placeholder:"Show name",name:"show",onInput:t[2]||(t[2]=e=>i.showAvailability()),required:""},null,544),[[l.nr,s.name]]),ts,ns,s.hide?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ls,[as,(0,a.wy)((0,a._)("select",{name:"rating","onUpdate:modelValue":t[3]||(t[3]=e=>s.rating=e),class:"select",required:""},cs,512),[[l.bM,s.rating,void 0,{number:!0}]]),ds,hs,ms,(0,a.wy)((0,a._)("select",{name:"tags","onUpdate:modelValue":t[4]||(t[4]=e=>s.tags=e),class:"select",required:""},ks,512),[[l.bM,s.tags]]),ys,Ss])),Ds,(0,a.wy)((0,a._)("select",{name:"venue","onUpdate:modelValue":t[5]||(t[5]=e=>s.venue=e),class:"select"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e,required:""},(0,h.zw)(e.name)+" "+(0,h.zw)(e.place)+" "+(0,h.zw)(e.location),9,$s)))),128))],512),[[l.bM,s.venue]]),Cs,Vs,Ts,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=e=>s.date=e),placeholder:"Show date",name:"date",required:""},null,512),[[l.nr,s.date]]),zs,qs,xs,(0,a.wy)((0,a._)("input",{type:"time","onUpdate:modelValue":t[7]||(t[7]=e=>s.time=e),placeholder:"Show start time",name:"time",required:""},null,512),[[l.nr,s.time]]),Us,As,Fs,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>s.price=e),min:0,placeholder:"Ticket price in ₹",name:"price",required:""},null,512),[[l.nr,s.price]]),js,Ps,s.venue?((0,a.wg)(),(0,a.iD)("button",Rs,"Submit")):(0,a.kq)("",!0)],32)])])),_:1})])}var Is={name:"AddShow",props:{list:{type:Array,required:!0}},data(){return{name:"",rating:null,tags:"",venue:null,date:null,time:null,price:null,hide:!1}},methods:{submitForm(){this.$emit("submitData",{name:this.name,rating:this.rating,tags:this.tags,venue_id:this.venue.id,venue_name:this.venue.name,venue_place:this.venue.place,venue_location:this.venue.location,date:this.date,time:this.time,price:this.price})},closeForm(){this.$emit("close")},async showAvailability(){if(""!=this.name){const e=await fetch(`${Be}api/show/${this.name}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(e.ok){const t=await e.json();t.message?(this.hide=!0,this.name=t.name):(this.hide=!1,console.log(t.message))}else console.log(e.statusText)}}}};const Ns=(0,s.Z)(Is,[["render",Ms]]);var Hs=Ns;const Ls={class:"modal"},Bs={class:"modal-content"},Es=(0,a._)("h2",null,"Add new venue",-1),Ws=(0,a._)("label",{for:"venue"},"Venue Name: ",-1),Ys=(0,a._)("br",null,null,-1),Zs=(0,a._)("br",null,null,-1),Os=(0,a._)("label",{for:"place"},"Place:",-1),Qs=(0,a._)("br",null,null,-1),Ks=(0,a._)("br",null,null,-1),Js=(0,a._)("label",{for:"location"},"Location:",-1),Gs=(0,a._)("br",null,null,-1),Xs=(0,a._)("br",null,null,-1),ei=(0,a._)("label",{for:"capacity"},"Capacity:",-1),ti=(0,a._)("br",null,null,-1),ni=(0,a._)("br",null,null,-1),li=(0,a._)("button",{type:"submit",class:"btn btn-primary btn-lg"},"Submit",-1);function ai(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Ls,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",Bs,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),Es,(0,a._)("form",{onSubmit:t[5]||(t[5]=(0,l.iM)(((...e)=>i.submitForm&&i.submitForm(...e)),["prevent"]))},[Ws,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),placeholder:"Show name",name:"venue",required:""},null,512),[[l.nr,s.name]]),Ys,Zs,Os,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.place=e),placeholder:"Place",name:"place",required:""},null,512),[[l.nr,s.place]]),Qs,Ks,Js,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>s.location=e),placeholder:"Location",name:"location",required:""},null,512),[[l.nr,s.location]]),Gs,Xs,ei,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>s.capacity=e),placeholder:"Capacity",name:"capacity",required:""},null,512),[[l.nr,s.capacity]]),ti,ni,li],32)])])),_:1})])}var oi={name:"AddVenue",data(){return{name:"",place:"",location:"",capacity:null}},methods:{submitForm(){this.$emit("submitData",{name:this.name,place:this.place,location:this.location,capacity:this.capacity})},closeForm(){this.$emit("close")}}};const si=(0,s.Z)(oi,[["render",ai]]);var ii=si;const ri=e=>((0,a.dD)("data-v-ac622a14"),e=e(),(0,a.Cn)(),e),ui={class:"modal"},ci={class:"modal-content"},di=ri((()=>(0,a._)("h2",null,"Remove Venue",-1))),hi=ri((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Venue Name"),(0,a._)("th",null,"Venue Place"),(0,a._)("th",null,"Venue Location"),(0,a._)("th",null,"Venue Capacity"),(0,a._)("th",null,"Action")],-1))),mi=["onClick"],pi=ri((()=>(0,a._)("i",{class:"bi bi-trash trash"},null,-1))),_i=[pi];function gi(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",ui,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",ci,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),di,(0,a._)("table",null,[hi,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.name),1),(0,a._)("td",null,(0,h.zw)(e.place),1),(0,a._)("td",null,(0,h.zw)(e.location),1),(0,a._)("td",null,(0,h.zw)(e.capacity),1),(0,a._)("td",null,[(0,a._)("span",{class:"delete-icon",onClick:t=>s.Remove(e),title:"Remove venue"},_i,8,mi)])])))),128))])])])),_:1})])}var wi={name:"RemoveVenue",props:{list:{type:Array,required:!0}},data(){return{name:"",place:"",location:"",capacity:null,id:null}},methods:{closeForm(){this.$emit("close")},Remove(e){Qn().confirm("WARNING!!! This action is irreversible.","Do you really want to delete this venue?",(()=>{this.id=e.id,this.$emit("Remove",e)}),(()=>{this.id=null}))}}};const bi=(0,s.Z)(wi,[["render",gi],["__scopeId","data-v-ac622a14"]]);var vi=bi;const fi=e=>((0,a.dD)("data-v-2c7a3d50"),e=e(),(0,a.Cn)(),e),ki={class:"modal"},yi={class:"modal-content"},Si=fi((()=>(0,a._)("h2",null,"Remove Show",-1))),Di=fi((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Show Name"),(0,a._)("th",null,"Show Rating"),(0,a._)("th",null,"Show Tags"),(0,a._)("th",null,"Action")],-1))),$i=["onClick"],Ci=fi((()=>(0,a._)("i",{class:"bi bi-trash trash"},null,-1))),Vi=[Ci];function Ti(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",ki,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",yi,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),Si,(0,a._)("table",null,[Di,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.name),1),(0,a._)("td",null,(0,h.zw)(e.rating),1),(0,a._)("td",null,(0,h.zw)(e.tags),1),(0,a._)("td",null,[(0,a._)("span",{class:"delete-icon",onClick:t=>s.Remove(e),title:"Remove show"},Vi,8,$i)])])))),128))])])])),_:1})])}var zi={name:"RemoveShow",props:{list:{type:Array,required:!0}},data(){return{name:"",tags:"",rating:null,id:null}},methods:{closeForm(){this.$emit("close")},Remove(e){Qn().confirm("WARNING!!! This action is irreversible.","Do you really want to delete this show?",(()=>{this.id=e.id,this.$emit("Remove",e)}),(()=>{this.id=null}))}}};const qi=(0,s.Z)(zi,[["render",Ti],["__scopeId","data-v-2c7a3d50"]]);var xi=qi;const Ui=e=>((0,a.dD)("data-v-e1c55b60"),e=e(),(0,a.Cn)(),e),Ai={class:"modal"},Fi={class:"modal-content"},ji=Ui((()=>(0,a._)("h2",null,"Export venue",-1))),Pi=Ui((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Venue Name"),(0,a._)("th",null,"Venue Place"),(0,a._)("th",null,"Venue Location"),(0,a._)("th",null,"Actions")],-1))),Ri=["onClick"];function Mi(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Ai,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",Fi,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),ji,(0,a._)("table",null,[Pi,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.name),1),(0,a._)("td",null,(0,h.zw)(e.place),1),(0,a._)("td",null,(0,h.zw)(e.location),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-primary btn-sm",onClick:t=>s.exporttask("http://127.0.0.1:8080/api/venue/export",{username:n.username,venue_id:e.id})},"Export",8,Ri)])])))),128))])])])),_:1})])}var Ii={name:"ExportVenue",props:{list:{type:Array,required:!0},username:{type:String,required:!0}},data(){return{}},methods:{closeForm(){console.log(Be),this.$emit("close")},exporttask(e,t){Kn(e,t,this.$router)}}};const Ni=(0,s.Z)(Ii,[["render",Mi],["__scopeId","data-v-e1c55b60"]]);var Hi=Ni;const Li={key:0},Bi={key:1},Ei={key:2},Wi=(0,a._)("strong",null,"Venue v/s Revenue",-1),Yi=[Wi],Zi={key:3},Oi=(0,a._)("strong",null,"Venue v/s Revenue",-1),Qi=[Oi],Ki=["src"];function Ji(e,t,n,l,o,s){return(0,a.wg)(),(0,a.iD)("div",null,["venue"===n.name?((0,a.wg)(),(0,a.iD)("h1",Li,"Venue Stats")):"show"===n.name?((0,a.wg)(),(0,a.iD)("h1",Bi,"Show Stats")):(0,a.kq)("",!0),"venue"===n.name?((0,a.wg)(),(0,a.iD)("p",Ei,Yi)):"show"===n.name?((0,a.wg)(),(0,a.iD)("p",Zi,Qi)):(0,a.kq)("",!0),(0,a._)("img",{src:o.imageUrl,alt:"Image"},null,8,Ki)])}n(2062);var Gi={name:"VisualStats",props:{name:{type:String,required:!0}},data(){return{imageUrl:""}},methods:{async getImage(){try{const e=await fetch(`${Be}api/stats?name=${this.name}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(e.ok){const t=await e.blob();this.imageUrl=URL.createObjectURL(t)}else this.$router.push("/signin"),console.error("Failed to fetch image:",e.status,e.statusText)}catch(e){console.error("Error fetching image:",e)}}},mounted(){this.getImage()},watch:{name(e,t){console.log(e),console.log(t),this.getImage()}}};const Xi=(0,s.Z)(Gi,[["render",Ji]]);var er=Xi;async function tr(e,t){const n=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)});try{if(n.ok){const e=await n.json();Qn().alert(e.message)}else console.log(n.statusText),"Token is missing"!==n.message&&"Token has expired"!==n.message&&"Token is invalid"!==n.message||this.$router.push("/signin")}catch(l){console.log(l)}}var nr={name:"AdminDashboard",components:{AddShow:Hs,ShowList:Ue,AddVenue:ii,VenueList:Le,RemoveVenue:vi,RemoveShow:xi,HelpSupport:hl,ExportVenue:Hi,SearchResults:ye,UpdateProfile:Ml,VisualStats:er},data(){return{email:"",username:"",addShow:!1,addVenue:!1,Show:!1,Venue:!1,VenueRemoval:!1,ShowRemoval:!1,showname:"",rating:null,tags:"",place:"",location:"",capacity:null,venuelist:null,showlist:null,help:!1,Export:!1,searchQuery:"",suggestions:null,element:null,showSuggestions:!1,UpdateProfile:!1,Stats:null}},methods:{logout(){localStorage.removeItem("authToken"),this.$store.commit("role",null),alert("Logged out successfully \n Redirecting to sign in page."),location.reload()},openAddshow(){this.addShow=!0},closeAddshow(){this.addShow=!1},openshow(e){"add"===e?(this.getvenue(`${Be}api/venue`),this.openAddshow()):"check"===e?(this.getshow(`${Be}api/show`),console.log(this.showlist),this.Show=!0):"rem"===e&&(this.getshow(`${Be}api/show`),this.ShowRemoval=!0)},closeshow(e){"add"===e?this.Show=!1:"rem"===e&&(this.ShowRemoval=!1)},async eraseshow(e){console.log(e),await tr(e,`${Be}api/show`),this.openshow("rem")},addShowfn(e){this.showname=e.name,this.rating=e.rating,this.tags=e.tags,Qn().alert(`Show name : ${this.showname}, Show rating: ${this.rating}, Show tags: ${this.tags} added succesfully`),Kn(`${Be}api/show`,e,this.$router),console.log(e),this.closeAddshow()},openAddvenue(){this.addVenue=!0},closeAddvenue(){this.addVenue=!1},openvenue(e){this.getvenue(`${Be}api/venue`),"rem"===e?this.VenueRemoval=!0:"check"===e&&(this.Venue=!0)},closevenue(e){"check"===e?this.Venue=!1:"rem"===e&&(this.VenueRemoval=!1)},addVenuefn(e){this.venuename=e.name,this.place=e.place,this.location=e.location,this.capacity=e.capacity;const t={venuename:this.venuename,place:this.place,location:this.location,capacity:this.capacity};this.closeAddvenue(),Kn(`${Be}api/venue`,t,this.$router)},async erasevenue(e){console.log(e),await tr(e,`${Be}api/venue`),this.openvenue("rem")},support(e){"open"===e?this.help=!0:"close"===e&&(this.help=!1)},exportvenue(e){"open"===e?(B(`${Be}api/venue`).then((e=>this.venuelist=e)),this.Export=!0):"close"===e&&(this.Export=!1)},async getvenue(e){const t=await fetch(e,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});try{if(t.ok){const e=await t.json();console.log(e),this.venuelist=e}else console.log(t.statusText),console.log(t.message),this.location.reload()}catch(n){console.log(n)}},async getshow(e){const t=await fetch(e,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});try{if(t.ok){const e=await t.json();console.log(e),this.showlist=e}else console.log(t.statusText),console.log(t.message)}catch(n){console.log(n)}},async handleSearchInput(){this.searchQuery.length>0?(this.Stats&&(this.Stats=!1),await B(`${Be}api/search?query=${this.searchQuery}`).then((e=>{this.suggestions=e})),this.suggestions.filter((e=>e.result.toLowerCase().includes(this.searchQuery.toLowerCase()))),this.showSuggestions=!0):(this.showSuggestions=!1,this.suggestions=[])},selectSuggestion(e){console.log("Selected suggestion:",e),this.searchQuery=e.result,this.element=e,this.showSuggestions=!1},performSearch(){console.log("Performing search:",this.searchQuery,this.element),this.searchQuery="",this.showSuggestions=!1},updateProfile(e){"open"===e?this.UpdateProfile=!0:"close"===e&&(this.UpdateProfile=!1)},stats(e){"show"===e?(null!=this.element&&(this.element=null),this.Stats="show"):"venue"===e&&(null!=this.element&&(this.element=null),this.Stats="venue")}},mounted(){const e=localStorage.getItem("authToken");console.log(e),fetch(`${Be}protected`,{headers:{Authorization:`Bearer ${e}`}}).then((e=>{if(e.ok)return this.$store.commit("role","admin"),e.json();localStorage.removeItem("authToken"),this.$store.commit("role",null),this.$router.push("/signin")})).then((e=>{this.username=e.username,this.email=e.email})).catch((e=>{console.error(e),e.message}))}};const lr=(0,s.Z)(nr,[["render",Ko],["__scopeId","data-v-7d38ce8f"]]);var ar=lr;const or=e=>((0,a.dD)("data-v-72c1c316"),e=e(),(0,a.Cn)(),e),sr={class:"modal"},ir={class:"modal-content"},rr=or((()=>(0,a._)("h2",null,"Show Details",-1))),ur=or((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Venue Name"),(0,a._)("th",null,"Venue Place"),(0,a._)("th",null,"Venue Location"),(0,a._)("th",null,"Venue Capacity"),(0,a._)("th",null,"Date"),(0,a._)("th",null,"Start Time"),(0,a._)("th",null,"Ticket Price")],-1)));function cr(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",sr,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",ir,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),rr,(0,a._)("table",null,[ur,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.links,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.venue_name),1),(0,a._)("td",null,(0,h.zw)(e.venue_place),1),(0,a._)("td",null,(0,h.zw)(e.venue_location),1),(0,a._)("td",null,(0,h.zw)(e.capacity),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1)])))),128))])])])),_:1})])}var dr={name:"ShowDetails",data(){return{show_id:null,name:"",tags:"",links:null,rating:null}},methods:{closeForm(){this.$router.back()}},mounted(){this.show_id=this.$route.params.id,fetch(`${Be}api/show?id=${this.show_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.show.name,this.show_id=e.show.id,this.rating=e.show.rating,this.tags=e.show.tags,this.links=e.links})).catch((e=>{console.log(e)}))}};const hr=(0,s.Z)(dr,[["render",cr],["__scopeId","data-v-72c1c316"]]);var mr=hr;const pr=e=>((0,a.dD)("data-v-0fa81103"),e=e(),(0,a.Cn)(),e),_r={class:"modal"},gr={class:"modal-content"},wr=pr((()=>(0,a._)("h2",null,"Venue Details",-1))),br=pr((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Show Name"),(0,a._)("th",null,"Rating"),(0,a._)("th",null,"Tags"),(0,a._)("th",null,"Date"),(0,a._)("th",null,"Start Time"),(0,a._)("th",null,"Ticket Price")],-1)));function vr(e,t,n,l,o,s){const i=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",_r,[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",gr,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),wr,(0,a._)("table",null,[br,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.links,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.show_name),1),(0,a._)("td",null,(0,h.zw)(e.rating),1),(0,a._)("td",null,(0,h.zw)(e.tags),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1)])))),128))])])])),_:1})])}var fr={name:"VenueDetails",data(){return{venue_id:null,name:"",place:"",location:"",links:null,capacity:null}},methods:{closeForm(){this.$router.back()}},mounted(){this.venue_id=this.$route.params.id,fetch(`${Be}api/venue?id=${this.venue_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.venue.name,this.venue_id=e.venue.id,this.place=e.venue.place,this.location=e.venue.location,this.capacity=e.venue.capacity,this.links=e.links})).catch((e=>{console.log(e)}))}};const kr=(0,s.Z)(fr,[["render",vr],["__scopeId","data-v-0fa81103"]]);var yr=kr;const Sr=e=>((0,a.dD)("data-v-9d18e0c4"),e=e(),(0,a.Cn)(),e),Dr={class:"modal"},$r={class:"modal-content"},Cr=Sr((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Venue Name"),(0,a._)("th",null,"Venue Place"),(0,a._)("th",null,"Venue Location"),(0,a._)("th",null,"Venue Capacity"),(0,a._)("th",null,"Date"),(0,a._)("th",null,"Start Time"),(0,a._)("th",null,"Ticket Price"),(0,a._)("th",null,"Actions")],-1))),Vr=["onClick"],Tr=["onClick"],zr=Sr((()=>(0,a._)("i",{class:"bi bi-trash trash"},null,-1))),qr=[zr];function xr(e,t,n,l,o,s){const i=(0,a.up)("ShowLinkModification"),r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Dr,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",$r,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),(0,a._)("h2",null,"Show name: "+(0,h.zw)(o.name),1),(0,a._)("table",null,[Cr,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.links,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.venue_name),1),(0,a._)("td",null,(0,h.zw)(e.venue_place),1),(0,a._)("td",null,(0,h.zw)(e.venue_location),1),(0,a._)("td",null,(0,h.zw)(e.capacity),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1),(0,a._)("td",null,[(0,a._)("a",{href:"#",onClick:t=>s.openShowLinkModification(e)},"Update",8,Vr),(0,a._)("span",{class:"delete-icon",onClick:t=>s.erase(e,"http://127.0.0.1:8080/api/admin/showlink"),title:"Delink show"},qr,8,Tr),e.Modifier?((0,a.wg)(),(0,a.j4)(i,{key:0,id:e.id,onClose:t=>s.closeShowLinkModification(e),onSubmit:s.submit},null,8,["id","onClose","onSubmit"])):(0,a.kq)("",!0)])])))),128))])])])),_:1})])}const Ur=e=>((0,a.dD)("data-v-cdc026aa"),e=e(),(0,a.Cn)(),e),Ar={class:"modal"},Fr={class:"modal-content"},jr=Ur((()=>(0,a._)("h2",null,"Update Venue link",-1))),Pr={method:"PATCH"},Rr=Ur((()=>(0,a._)("label",{for:"venue"},"Venue Name: ",-1))),Mr=Ur((()=>(0,a._)("br",null,null,-1))),Ir=Ur((()=>(0,a._)("br",null,null,-1))),Nr=Ur((()=>(0,a._)("label",{for:"place"},"Place:",-1))),Hr=Ur((()=>(0,a._)("br",null,null,-1))),Lr=Ur((()=>(0,a._)("br",null,null,-1))),Br=Ur((()=>(0,a._)("label",{for:"location"},"Location:",-1))),Er=Ur((()=>(0,a._)("br",null,null,-1))),Wr=Ur((()=>(0,a._)("br",null,null,-1))),Yr=Ur((()=>(0,a._)("label",{for:"capacity"},"Capacity:",-1))),Zr=Ur((()=>(0,a._)("br",null,null,-1))),Or=Ur((()=>(0,a._)("br",null,null,-1))),Qr=Ur((()=>(0,a._)("label",{for:"date"},"Date",-1))),Kr=Ur((()=>(0,a._)("br",null,null,-1))),Jr=Ur((()=>(0,a._)("br",null,null,-1))),Gr=Ur((()=>(0,a._)("label",{for:"time"},"Time",-1))),Xr=Ur((()=>(0,a._)("br",null,null,-1))),eu=Ur((()=>(0,a._)("br",null,null,-1))),tu=Ur((()=>(0,a._)("label",{for:"price"},"Ticket price",-1))),nu=Ur((()=>(0,a._)("br",null,null,-1))),lu=Ur((()=>(0,a._)("br",null,null,-1)));function au(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",Ar,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",Fr,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),jr,(0,a._)("form",Pr,[Rr,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),placeholder:"Show name",name:"venue",required:"",disabled:""},null,512),[[l.nr,s.name]]),Mr,Ir,Nr,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.place=e),placeholder:"Place",name:"place",required:"",disabled:""},null,512),[[l.nr,s.place]]),Hr,Lr,Br,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>s.location=e),placeholder:"Location",name:"location",required:"",disabled:""},null,512),[[l.nr,s.location]]),Er,Wr,Yr,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>s.capacity=e),placeholder:"Capacity",name:"capacity",required:"",disabled:""},null,512),[[l.nr,s.capacity]]),Zr,Or,Qr,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>s.date=e),placeholder:"Date",name:"date",required:""},null,512),[[l.nr,s.date]]),Kr,Jr,Gr,(0,a.wy)((0,a._)("input",{type:"time","onUpdate:modelValue":t[6]||(t[6]=e=>s.time=e),placeholder:"Show start time",name:"time",required:""},null,512),[[l.nr,s.time]]),Xr,eu,tu,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=e=>s.price=e),placeholder:"₹",name:"price",required:""},null,512),[[l.nr,s.price]]),nu,lu,(0,a._)("button",{type:"submit",onClick:t[8]||(t[8]=(...e)=>i.submitForm&&i.submitForm(...e)),class:"btn btn-primary btn lg"},"Submit")])])])),_:1})])}var ou={name:"ShowLinkModification",props:{id:{type:Number,required:!0}},data(){return{link_id:null,name:"",place:"",location:"",capacity:null,date:"",time:"",price:null,show_id:null,venue_id:null}},methods:{closeForm(){this.$emit("close")},submitForm(e){e.preventDefault(),this.$emit("submit",{id:this.link_id,show_id:this.show_id,venue_id:this.venue_id,name:this.name,date:this.date,time:this.time,price:this.price})}},mounted(){this.link_id=this.id,fetch(`${Be}api/admin/showlink?id=${this.link_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.venue_name,this.show_id=e.show_id,this.venue_id=e.venue_id,this.place=e.venue_place,this.location=e.venue_location,this.capacity=e.venue_capacity,this.time=e.time,this.date=e.date,this.price=e.ticket_price})).catch((e=>{console.log(e)}))}};const su=(0,s.Z)(ou,[["render",au],["__scopeId","data-v-cdc026aa"]]);var iu=su,ru={name:"ShowLink",components:{ShowLinkModification:iu},data(){return{id:null,show_id:null,name:"",tags:"",links:null,rating:null}},methods:{closeForm(){localStorage.getItem("authToken")?this.$router.push("/modify/show"):this.$router.push("/")},async reactiveDelete(e,t){await tr(e,t),location.reload()},erase(e,t){Qn().confirm("WARNING!!! This action is irreversible.","Do you really want to delink this venue?",(()=>{this.reactiveDelete(e,t)}),(()=>console.log(e)))},openShowLinkModification(e){e.Modifier=!0,this.id=e.id},closeShowLinkModification(e){e.Modifier=!1,this.id=null},async submit(e){try{const t=await fetch(`${Be}api/admin/showlink`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)});if(t.ok){for(let t=0;t<=this.links.length;t++)this.links[t].id===this.id&&(this.links[t].Modifier=!1,this.id=null);const e=await t.json();console.log(e.msg)}else console.log(t.statusText)}catch(t){console.log(t)}}},mounted(){this.show_id=this.$route.params.id,fetch(`${Be}api/show?id=${this.show_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.show.name,this.show_id=e.show.id,this.rating=e.show.rating,this.tags=e.show.tags,this.links=e.links})).catch((e=>{console.log(e)}))},watch:{id(e,t){console.log(`${t} changed to ${e}`),null===e&&location.reload()}}};const uu=(0,s.Z)(ru,[["render",xr],["__scopeId","data-v-9d18e0c4"]]);var cu=uu;const du=e=>((0,a.dD)("data-v-2c220950"),e=e(),(0,a.Cn)(),e),hu={class:"modal"},mu={class:"modal-content"},pu=du((()=>(0,a._)("tr",null,[(0,a._)("th",null,"Show Name"),(0,a._)("th",null,"Rating"),(0,a._)("th",null,"Tags"),(0,a._)("th",null,"Date"),(0,a._)("th",null,"Start Time"),(0,a._)("th",null,"Ticket Price"),(0,a._)("th",null,"Actions")],-1))),_u=["onClick"],gu=["onClick"],wu=du((()=>(0,a._)("i",{class:"bi bi-trash trash"},null,-1))),bu=[wu];function vu(e,t,n,l,o,s){const i=(0,a.up)("VenueLinkModification"),r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",hu,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",mu,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>s.closeForm&&s.closeForm(...e))},"×"),(0,a._)("h2",null,"Venue: "+(0,h.zw)(o.name)+" "+(0,h.zw)(o.place)+" "+(0,h.zw)(o.location),1),(0,a._)("table",null,[pu,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.links,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,(0,h.zw)(e.show_name),1),(0,a._)("td",null,(0,h.zw)(e.rating),1),(0,a._)("td",null,(0,h.zw)(e.tags),1),(0,a._)("td",null,(0,h.zw)(e.date),1),(0,a._)("td",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("td",null,(0,h.zw)(e.ticket_price),1),(0,a._)("td",null,[(0,a._)("a",{href:"#",onClick:t=>s.openVenueLinkModification(e)},"Update",8,_u),(0,a._)("span",{class:"delete-icon",onClick:t=>s.erase(e,"http://127.0.0.1:8080/api/admin/venuelink"),title:"Delink show"},bu,8,gu),e.Modifier?((0,a.wg)(),(0,a.j4)(i,{key:0,id:e.id,onClose:t=>s.closeVenueLinkModification(e),onSubmit:s.submit},null,8,["id","onClose","onSubmit"])):(0,a.kq)("",!0)])])))),128))])])])),_:1})])}const fu=e=>((0,a.dD)("data-v-be9ada5a"),e=e(),(0,a.Cn)(),e),ku={class:"modal"},yu={class:"modal-content"},Su=fu((()=>(0,a._)("h2",null,"Update Show link",-1))),Du={method:"PATCH"},$u=fu((()=>(0,a._)("label",{for:"show"},"Show Name: ",-1))),Cu=fu((()=>(0,a._)("br",null,null,-1))),Vu=fu((()=>(0,a._)("br",null,null,-1))),Tu=fu((()=>(0,a._)("label",{for:"tags"},"Tags:",-1))),zu=fu((()=>(0,a._)("br",null,null,-1))),qu=fu((()=>(0,a._)("br",null,null,-1))),xu=fu((()=>(0,a._)("label",{for:"rating"},"Rating:",-1))),Uu=fu((()=>(0,a._)("option",{value:"1"},"1",-1))),Au=fu((()=>(0,a._)("option",{value:"2"},"2",-1))),Fu=fu((()=>(0,a._)("option",{value:"3"},"3",-1))),ju=fu((()=>(0,a._)("option",{value:"4"},"4",-1))),Pu=fu((()=>(0,a._)("option",{value:"5"},"5",-1))),Ru=[Uu,Au,Fu,ju,Pu],Mu=fu((()=>(0,a._)("br",null,null,-1))),Iu=fu((()=>(0,a._)("br",null,null,-1))),Nu=fu((()=>(0,a._)("label",{for:"date"},"Date",-1))),Hu=fu((()=>(0,a._)("br",null,null,-1))),Lu=fu((()=>(0,a._)("br",null,null,-1))),Bu=fu((()=>(0,a._)("label",{for:"time"},"Time",-1))),Eu=fu((()=>(0,a._)("br",null,null,-1))),Wu=fu((()=>(0,a._)("br",null,null,-1))),Yu=fu((()=>(0,a._)("label",{for:"price"},"Ticket price",-1))),Zu=fu((()=>(0,a._)("br",null,null,-1))),Ou=fu((()=>(0,a._)("br",null,null,-1)));function Qu(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",ku,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",yu,[(0,a._)("span",{class:"close",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"×"),Su,(0,a._)("form",Du,[$u,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.name=e),placeholder:"Show name",name:"show",required:"",disabled:""},null,512),[[l.nr,s.name]]),Cu,Vu,Tu,(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.tags=e),placeholder:"Tags seperated by ','",name:"tags",required:"",disabled:""},null,512),[[l.nr,s.tags]]),zu,qu,xu,(0,a.wy)((0,a._)("select",{name:"rating","onUpdate:modelValue":t[3]||(t[3]=e=>s.rating=e),class:"select",required:"",disabled:""},Ru,512),[[l.bM,s.rating,void 0,{number:!0}]]),Mu,Iu,Nu,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>s.date=e),placeholder:"Date",name:"date",required:""},null,512),[[l.nr,s.date]]),Hu,Lu,Bu,(0,a.wy)((0,a._)("input",{type:"time","onUpdate:modelValue":t[5]||(t[5]=e=>s.time=e),placeholder:"Show start time",name:"time",required:""},null,512),[[l.nr,s.time]]),Eu,Wu,Yu,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>s.price=e),placeholder:"₹",name:"price",required:""},null,512),[[l.nr,s.price]]),Zu,Ou,(0,a._)("button",{type:"submit",onClick:t[7]||(t[7]=(...e)=>i.submitForm&&i.submitForm(...e)),class:"btn btn-primary btn lg"},"Submit")])])])),_:1})])}var Ku={name:"ShowModification",props:{id:{type:Number,required:!0}},data(){return{link_id:null,venue_id:null,show_id:null,name:"",tags:"",rating:null,date:"",time:"",price:null}},methods:{closeForm(){this.$emit("close")},submitForm(e){e.preventDefault(),this.$emit("submit",{id:this.link_id,venue_id:this.venue_id,show_id:this.show_id,name:this.name,tags:this.tags,rating:this.rating,date:this.date,time:this.time,price:this.price})}},mounted(){this.link_id=this.id,fetch(`${Be}api/admin/venuelink?id=${this.link_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.show_name,this.rating=e.rating,this.tags=e.tags,this.show_id=e.show_id,this.venue_id=e.venue_id,this.time=e.time,this.date=e.date,this.price=e.ticket_price})).catch((e=>{console.log(e)}))}};const Ju=(0,s.Z)(Ku,[["render",Qu],["__scopeId","data-v-be9ada5a"]]);var Gu=Ju,Xu={name:"VenueLink",components:{VenueLinkModification:Gu},data(){return{id:null,venue_id:null,name:"",place:"",location:"",links:null,capacity:null}},methods:{closeForm(){localStorage.getItem("authToken")?this.$router.push("/modify/venue"):this.$router.push("/")},async reactiveDelete(e,t){await tr(e,t),location.reload()},erase(e,t){Qn().confirm("WARNING!!! This action is irreversible.","Do you really want to delink this show?",(()=>{this.reactiveDelete(e,t)}),(()=>console.log(e)))},openVenueLinkModification(e){e.Modifier=!0,this.id=e.id},closeVenueLinkModification(e){e.Modifier=!1,this.id=null},async submit(e){try{const t=await fetch(`${Be}api/admin/venuelink`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:JSON.stringify(e)});if(t.ok){for(let t=0;t<=this.links.length;t++)this.links[t].id===this.id&&(this.links[t].Modifier=!1,this.id=null);const e=await t.json();console.log(e.msg)}else console.log(t.statusText)}catch(t){console.log(t)}}},mounted(){this.venue_id=this.$route.params.id,fetch(`${Be}api/venue?id=${this.venue_id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.name=e.venue.name,this.venue_id=e.venue.id,this.place=e.venue.place,this.location=e.venue.location,this.capacity=e.venue.capacity,this.links=e.links})).catch((e=>{console.log(e)}))},watch:{id(e,t){console.log(`${t} changed to ${e}`),null===e&&location.reload()}}};const ec=(0,s.Z)(Xu,[["render",vu],["__scopeId","data-v-2c220950"]]);var tc=ec;const nc=e=>((0,a.dD)("data-v-5418eec9"),e=e(),(0,a.Cn)(),e),lc={class:"book-now-container"},ac={class:"row row-cols-1 row-cols-md-4"},oc={key:0,class:"card h-100 shadow-sm"},sc={class:"card-body"},ic={class:"card-title text-center"},rc={class:"list-unstyled mb-3"},uc={class:"d-flex justify-content-between align-items-center"},cc={class:"fw-bold"},dc={class:"d-flex justify-content-between align-items-center"},hc={class:"text-end mt-3"},mc=["onClick"],pc={key:1,href:"#",class:"btn btn-grey btn-sm",disabled:""},_c=nc((()=>(0,a._)("hr",{class:"my-3"},null,-1))),gc=nc((()=>(0,a._)("a",{href:"/protected",class:"back-link"},"Back",-1)));function wc(e,t,n,l,o,s){return(0,a.wg)(),(0,a.iD)("div",lc,[(0,a._)("div",ac,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.list,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col mb-4",key:e.id},[e.links.length>=1?((0,a.wg)(),(0,a.iD)("div",oc,[(0,a._)("div",sc,[(0,a._)("h4",ic,(0,h.zw)(e.name)+" "+(0,h.zw)(e.place)+", "+(0,h.zw)(e.location),1),(0,a._)("ul",rc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.links,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[(0,a._)("div",uc,[(0,a._)("span",cc,(0,h.zw)(e.show_name),1),(0,a._)("span",null,(0,h.zw)(e.date),1)]),(0,a._)("div",dc,[(0,a._)("span",null,(0,h.zw)(e.time.slice(0,-3)),1),(0,a._)("span",null,"₹"+(0,h.zw)(e.ticket_price),1)]),(0,a._)("div",hc,[e.tickets_left>=1?((0,a.wg)(),(0,a.iD)("button",{key:0,href:"#",class:"btn btn-primary btn-sm",onClick:t=>s.confirmation(e.id)},"Book Now",8,mc)):((0,a.wg)(),(0,a.iD)("button",pc,"Book Now"))]),_c])))),128))])])])):(0,a.kq)("",!0)])))),128))]),gc])}var bc={name:"BookNow",data(){return{list:[],username:"",email:""}},methods:{confirmation(e){this.$router.push(`/book/${e}`)}},mounted(){B(`${Be}api/book`).then((e=>{this.list=e,console.log(this.list)})),fetch(`${Be}user/protected`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok){const t=e.json();return t}localStorage.removeItem("authToken"),this.$router.push("/signin"),console.log(e.statusText)})).then((e=>{void 0!=e&&(this.username=e.username,this.email=e.email)}))}};const vc=(0,s.Z)(bc,[["render",wc],["__scopeId","data-v-5418eec9"]]);var fc=vc;const kc=e=>((0,a.dD)("data-v-3c0e3b2e"),e=e(),(0,a.Cn)(),e),yc={class:"booking-confirmation"},Sc={class:"modal show"},Dc={class:"modal-dialog"},$c={class:"modal-content"},Cc={class:"modal-header"},Vc=kc((()=>(0,a._)("h5",{class:"modal-title"},"Booking Confirmation",-1))),Tc={class:"modal-body"},zc=kc((()=>(0,a._)("strong",null,"Show Name:",-1))),qc=kc((()=>(0,a._)("strong",null,"Venue Name:",-1))),xc=kc((()=>(0,a._)("strong",null,"Price:",-1))),Uc=kc((()=>(0,a._)("strong",null,"Date:",-1))),Ac=kc((()=>(0,a._)("strong",null,"Time:",-1))),Fc=kc((()=>(0,a._)("label",{for:"no_of_seats_requested"},[(0,a._)("strong",null,"No of seats:")],-1))),jc=["value"],Pc={class:"wallet-section"},Rc={key:0},Mc={for:"wallet",class:"wallet"},Ic={class:"modal-footer"};function Nc(e,t,n,o,s,i){return(0,a.wg)(),(0,a.iD)("div",yc,[(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=t=>e.openModal(e.show))},"Book Now"),(0,a._)("div",Sc,[(0,a._)("div",Dc,[(0,a._)("div",$c,[(0,a._)("div",Cc,[Vc,(0,a._)("button",{type:"button",class:"btn-close",onClick:t[1]||(t[1]=(...e)=>i.closeModal&&i.closeModal(...e))})]),(0,a._)("div",Tc,[(0,a._)("p",null,[zc,(0,a.Uk)(" "+(0,h.zw)(s.details.show_name),1)]),(0,a._)("p",null,[qc,(0,a.Uk)(" "+(0,h.zw)(s.details.venue_name)+" "+(0,h.zw)(s.details.place)+", "+(0,h.zw)(s.details.location),1)]),(0,a._)("p",null,[xc,(0,a.Uk)(" ₹"+(0,h.zw)(s.details.ticket_price),1)]),(0,a._)("p",null,[Uc,(0,a.Uk)(" "+(0,h.zw)(s.details.date),1)]),(0,a._)("p",null,[Ac,(0,a.Uk)(" "+(0,h.zw)(s.details.time.slice(0,-3)),1)]),Fc,(0,a.wy)((0,a._)("select",{name:"no_of_seats_requested","onUpdate:modelValue":t[2]||(t[2]=e=>s.details.no_of_seats_requested=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Math.min(s.details.tickets_left,10),(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e},(0,h.zw)(e),9,jc)))),128))],512),[[l.bM,s.details.no_of_seats_requested,void 0,{number:!0}]])]),(0,a._)("div",Pc,[s.details.wallet>0?((0,a.wg)(),(0,a.iD)("p",Rc,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>s.details.checked=e),name:"wallet",value:"true"},null,512),[[l.e8,s.details.checked]]),(0,a._)("label",Mc,"Use Wallet:₹"+(0,h.zw)(s.details.wallet),1)])):(0,a.kq)("",!0)]),(0,a._)("div",Ic,[(0,a._)("button",{type:"button",class:"btn btn-secondary",onClick:t[4]||(t[4]=(...e)=>i.closeModal&&i.closeModal(...e))},"Cancel"),s.details.tickets_left>=1&&s.details.no_of_seats_requested?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=e=>i.confirmBooking("http://127.0.0.1:8080/api/book?id="+this.id,s.details))},"Confirm Booking")):((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",class:"btn btn-grey",onClick:t[6]||(t[6]=(...e)=>i.confirmBooking&&i.confirmBooking(...e)),disabled:""},"Confirm Booking"))])])])])])}var Hc={name:"BookingConfirmation",data(){return{id:null,details:{id:null,show_name:"",venue_name:"",place:"",location:"",date:"",time:"",ticket_price:null,tickets_left:null,no_of_seats_requested:null,wallet:null,checked:!1}}},methods:{closeModal(){this.$router.push("/book")},confirmBooking(e,t){const n=this.details.ticket_price*this.details.no_of_seats_requested;t.checked?Qn().confirm("Are you sure?",`Your total amount is ₹${n}.          \n You are paying ₹${this.details.wallet} from your wallet and remaining ₹${Math.max(0,n-this.details.wallet)} from other payment method`,(()=>Kn(e,t,this.$router)),(()=>this.closeModal())):Qn().confirm("Are you sure?",`Your total amount is ₹${n}`,(()=>{Kn(e,t,this.$router),this.$router.push("/protected")}),(()=>this.closeModal()))}},mounted(){this.id=this.$route.params.id,fetch(`${Be}api/book?id=${this.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}).then((e=>{if(e.ok)return e.json();this.$router.push("/signin")})).then((e=>{this.details.show_name=e.show_name,this.details.venue_name=e.venue_name,this.details.place=e.place,this.details.location=e.location,this.details.date=e.date,this.details.time=e.time,this.details.ticket_price=e.ticket_price,this.details.tickets_left=e.tickets_left,this.details.id=e.id,this.details.wallet=e.wallet})).catch((e=>{console.log(e),this.$router.push("/signin")}))}};const Lc=(0,s.Z)(Hc,[["render",Nc],["__scopeId","data-v-3c0e3b2e"]]);var Bc=Lc;const Ec={class:"card text-center",style:{width:"300px"}},Wc=(0,a._)("div",{class:"card-header h5 text-white bg-primary"},"Password Reset",-1),Yc={class:"card-body px-5"},Zc=(0,a._)("p",{class:"card-text py-2"}," Enter your email address and we'll send you an email with instructions to reset your password. ",-1),Oc={class:"form-outline"},Qc={key:0,href:"#",class:"btn btn-primary w-100"},Kc=(0,a._)("div",{class:"d-flex justify-content-between mt-4"},[(0,a._)("a",{class:"",href:"/signin"},"Sign in"),(0,a._)("a",{class:"",href:"/"},"Home")],-1);function Jc(e,t,n,o,s,i){const r=(0,a.up)("center");return(0,a.wg)(),(0,a.j4)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",Ec,[Wc,(0,a._)("div",Yc,[Zc,(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,l.iM)(((...e)=>i.sendlink&&i.sendlink(...e)),["prevent"]))},[(0,a._)("div",Oc,[(0,a.wy)((0,a._)("input",{type:"email",id:"typeEmail",class:"form-control my-3","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e),placeholder:"Enter your registered email address"},null,512),[[l.nr,s.email]])]),null!=s.email?((0,a.wg)(),(0,a.iD)("button",Qc,"Reset password")):(0,a.kq)("",!0)],32),Kc])])])),_:1})}var Gc={name:"ForgotPassword",data(){return{email:null}},methods:{async sendlink(){await Kn(Be+"api/forgot/password",{email:this.email},this.$router)}}};const Xc=(0,s.Z)(Gc,[["render",Jc]]);var ed=Xc;const td=e=>((0,a.dD)("data-v-38ec10ac"),e=e(),(0,a.Cn)(),e),nd={key:0},ld=td((()=>(0,a._)("h4",{class:"heading"},"Update Password",-1))),ad={class:"password-update-form"},od=td((()=>(0,a._)("label",{for:"username"},"Username",-1))),sd=td((()=>(0,a._)("br",null,null,-1))),id=td((()=>(0,a._)("br",null,null,-1))),rd=td((()=>(0,a._)("label",{for:"password"},"Password",-1))),ud=td((()=>(0,a._)("br",null,null,-1))),cd=td((()=>(0,a._)("br",null,null,-1))),dd=td((()=>(0,a._)("label",{for:"re-enter-password"},"Re-enter Password",-1))),hd=td((()=>(0,a._)("br",null,null,-1))),md=td((()=>(0,a._)("br",null,null,-1))),pd={key:0,type:"submit",class:"btn btn-primary btn-sm"},_d={key:1,class:"error-message"};function gd(e,t,n,o,s,i){return s.status?((0,a.wg)(),(0,a.iD)("div",nd,[ld,(0,a._)("div",ad,[(0,a._)("form",{onSubmit:t[3]||(t[3]=(0,l.iM)(((...e)=>i.updatepassword&&i.updatepassword(...e)),["prevent"]))},[od,(0,a.wy)((0,a._)("input",{type:"text",name:"username",placeholder:"Enter your registered username","onUpdate:modelValue":t[0]||(t[0]=e=>s.username=e),required:""},null,512),[[l.nr,s.username]]),sd,id,rd,(0,a.wy)((0,a._)("input",{type:"password",name:"password",placeholder:"Set new password","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),minlength:"8",required:""},null,512),[[l.nr,s.password]]),ud,cd,dd,(0,a.wy)((0,a._)("input",{type:"password",name:"re-enter-password",placeholder:"Re-enter new password","onUpdate:modelValue":t[2]||(t[2]=e=>s.check=e),minlength:"8",required:""},null,512),[[l.nr,s.check]]),hd,md,s.password===s.check?((0,a.wg)(),(0,a.iD)("button",pd,"Update Password")):((0,a.wg)(),(0,a.iD)("p",_d,"Passwords do not match."))],32)])])):(0,a.kq)("",!0)}var wd={name:"ResetPassword",data(){return{token:null,status:!1,password:"",check:"",username:""}},methods:{async mount(){const e=await fetch(`${Be}/api/reset/password/${this.token}`);if(e.ok){const t=await e.json();"Token valid"!=t.message?(Qn().alert("Reset link is invalid/expired"),setTimeout((()=>{this.$router.push("/signin")}),2500)):(this.status=!0,console.log(t.message))}else console.log(e.statusText),setTimeout((()=>{this.$router.push("/signin")}),2500)},async updatepassword(){await Kn(`${Be}api/reset/password`,{token:this.token,password:ut(this.password),username:this.username},this.$router),window.close()}},mounted(){this.token=this.$route.params.token,this.mount()}};const bd=(0,s.Z)(wd,[["render",gd],["__scopeId","data-v-38ec10ac"]]);var vd=bd;const fd=[{path:"/",name:"home",component:Ye},{path:"/signin",name:"signin",component:ht},{path:"/signup",name:"signup",component:tn,meta:{isadmin:!1}},{path:"/protected",name:"DashBoard",component:Jl},{path:"/modify/venue",name:"ModifyVenue",component:Va},{path:"/modify/show",name:"ModifyShow",component:_o},{path:"/admin/signup",name:"AdminSignup",component:tn,meta:{isadmin:!0}},{path:"/admin/dashboard",name:"AdminDashboard",component:ar},{path:"/show/details/:id",name:"ShowDetails",component:mr},{path:"/venue/details/:id",name:"VenueDetails",component:yr},{path:"/admin/venuelink/:id",name:"VenueLink",component:tc},{path:"/admin/showlink/:id",name:"ShowLink",component:cu},{path:"/book",name:"BookNow",component:fc},{path:"/book/:id",name:"BookingConfirmation",component:Bc},{path:"/forgot/password",name:"ForgotPassword",component:ed},{path:"/api/reset/password/:token",name:"ResetPassword",component:vd}],kd=(0,d.p7)({history:(0,d.PO)("/"),routes:fd});var yd=kd,Sd=n(65),Dd=(0,Sd.MT)({state:{role:null},getters:{},mutations:{role(e,t){e.role=t}},actions:{},modules:{}});n(7024),n(5654);const $d=(0,l.ri)(u);$d.config.devtools=!1,$d.config.debug=!1,$d.config.silent=!0,(0,l.ri)(u).use(Dd).use(yd).use(Qn()).mount("#app")},2480:function(){}},t={};function n(l){var a=t[l];if(void 0!==a)return a.exports;var o=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,l,a,o){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,r=0;r<l.length;r++)(!1&o||s>=o)&&Object.keys(n.O).every((function(e){return n.O[e](l[r])}))?l.splice(r--,1):(i=!1,o<s&&(s=o));if(i){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,o,s=l[0],i=l[1],r=l[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(r)var c=r(n)}for(t&&t(l);u<s.length;u++)o=s[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},l=self["webpackChunkticketing_app"]=self["webpackChunkticketing_app"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(7519)}));l=n.O(l)})();
//# sourceMappingURL=app.82d54a1e.js.map